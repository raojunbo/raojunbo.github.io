
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>
    
  Git 拾遗 - 北哥传奇
  

  </title>
  <meta name="author" content="">
  <meta name="description" content="">

  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link href="asset/css/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="atom.xml" rel="alternate" title="北哥传奇" type="application/atom+xml">
  <script src="asset/js/modernizr-2.0.js"></script>
  <script src="asset/js/jquery.min.js"></script>
  <script src="asset/highlightjs/highlight.pack.js"></script>
  <link href="asset/highlightjs/styles/solarized_light.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script>hljs.initHighlightingOnLoad();</script>

  <style type="text/css">
  .cat-children-p{ padding: 6px 0px;}
  .hljs{background: none;}
  </style>
  <script type="text/javascript">
  var isAddSildbar = true;
  </script>
  <script src="asset/js/octopress.js" type="text/javascript"></script>
</head>
<script type="text/javascript">
//链接新开窗口
function addBlankTargetForLinks () {
  $('a[href^="http"]').each(function(){
      $(this).attr('target', '_blank');
  });
}
$(document).ready(function(event) {
  addBlankTargetForLinks();
});
</script>
<body   >
  <header role="banner"><hgroup>
  <h1><a href="index.html">北哥传奇</a></h1>
  
    <h2></h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:raojunbo.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">

  <li id=""><a target="self" href="index.html">Home</a></li>

  <li id=""><a target="_self" href="archives.html">Archives</a></li>

</ul>

</nav>
  <div id="main">
    <div id="content"> 
<div>
	<article class="hentry" role="article">
	<header>
			  	<h1 class="entry-title">Git 拾遗</h1>
				<p class="meta"><time datetime="2018-12-21T10:28:03+08:00" pubdate data-updated="true">2018/12/21</time></p>
			 </header>
		  	<div class="entry-content">
			  	<ul>
<li>
<a href="#toc_0"><code>.git</code>文件目录</a>
</li>
<li>
<a href="#toc_1">commit,tree,block关系</a>
</li>
<li>
<a href="#toc_2">分离头指针情况的注意事项（没有与branch进行关联）</a>
</li>
<li>
<a href="#toc_3">修改commit的message</a>
</li>
<li>
<a href="#toc_4">rebase操作</a>
<ul>
<li>
<a href="#toc_5">修改以往的任何一个commit的message(rebase)</a>
</li>
<li>
<a href="#toc_6">合并以往的连续的几个commit（rebase）</a>
</li>
<li>
<a href="#toc_7">合并以往的不连续的commit(rebase)</a>
</li>
</ul>
</li>
<li>
<a href="#toc_8">diff操作</a>
</li>
<li>
<a href="#toc_9">恢复工作区，恢复索引区</a>
</li>
<li>
<a href="#toc_10">删除，重命名文件</a>
</li>
<li>
<a href="#toc_11">ignore文件</a>
</li>
</ul>


<h2 id="toc_0"><code>.git</code>文件目录</h2>

<pre><code>➜  .git git:(V.12.0) ls -l
total 1440
-rw-r--r--    1 raojunbo  staff      26 12 15 15:40 COMMIT_EDITMSG
-rw-r--r--    1 raojunbo  staff    1573 12 18 19:12 FETCH_HEAD
-rw-r--r--    1 raojunbo  staff      23 12 18 19:12 HEAD
-rw-r--r--    1 raojunbo  staff      41 12 18 19:12 ORIG_HEAD
-rw-r--r--    1 raojunbo  staff     551 12 12 12:56 config
-rw-r--r--    1 raojunbo  staff      73 11 30 11:39 description
-rw-r--r--    1 raojunbo  staff  311844 12 20 22:54 gitk.cache
drwxr-xr-x   13 raojunbo  staff     416 11 30 11:39 hooks
-rw-r--r--    1 raojunbo  staff  391258 12 20 22:48 index
drwxr-xr-x    3 raojunbo  staff      96 11 30 11:39 info
drwxr-xr-x    4 raojunbo  staff     128 11 30 11:42 logs
drwxr-xr-x  256 raojunbo  staff    8192 12 14 14:58 objects
-rw-r--r--    1 raojunbo  staff    1536 11 30 11:42 packed-refs
drwxr-xr-x    5 raojunbo  staff     160 11 30 11:42 refs
</code></pre>

<ul>
<li><p>HEAD 文件<br/>
存有当前分支的头指针。在切换分支的时候，会跟随分支的变化而变化。当然也可以不与分支挂钩，直接指向一个处理分支状态（任意指向的）也可以。</p></li>
<li><p>config 文件</p>

<p><code>git config -l</code>命令的内容</p></li>
</ul>

<ul>
<li><p>ORIG_HEAD 文件</p></li>
<li><p>FETCH_HEAD 文件</p></li>
<li><p>object目录<br/>
对象集，block ,commit,tree,tags;</p></li>
<li><p>refs</p></li>
</ul>

<blockquote>
<p>git内部的命令<br/>
查看hash所代表的对象类型 `<code>git cat-file -t 005642f3c41eecb8c56b8b77c4f100f1575ccf54</code></p>

<p>查看hash所代表的对象实际内容<code>git cat-file -p 005642f3c41eecb8c56b8b77c4f100f1575ccf54</code></p>
</blockquote>

<h2 id="toc_1">commit,tree,block关系</h2>

<p><img src="media/15453592839286/gitbloctree.png" alt="gitbloctree"/></p>

<p>blob实际就是真实的文件<br/>
tree实际就是目录<br/>
commit是git里的东西是一个包含“根tree”的东西。commit里有parent(父commit),author(作者),committer(提交者)</p>

<h2 id="toc_2">分离头指针情况的注意事项（没有与branch进行关联）</h2>

<pre><code>➜  GitTestDir git:(master) git checkout 552aa3eba30936d5c4ecf148b38d0cbc89221fbc 
Note: checking out &#39;552aa3eba30936d5c4ecf148b38d0cbc89221fbc&#39;.

You are in &#39;detached HEAD&#39; state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -b with the checkout command again. Example:

  git checkout -b &lt;new-branch-name&gt;

HEAD is now at 552aa3e add sty
➜  GitTestDir git:(552aa3e) 
</code></pre>

<p>直接切换到一个指定的commit号，直接进入工作后，进行提交，如果在checkout 到其它分支，就会出现分离头指针，也就是没有基于某个分支。在后期，分支的指针会自动被清理掉。</p>

<p>git diff HEAD HEAD^     //head与父亲进行对比<br/>
git diff HEAD HEAD<sup>^</sup>   //head 与父亲的父亲进行对比<br/>
git diff HEAD HEAD~1    //head 与父亲进行对比</p>

<h2 id="toc_3">修改commit的message</h2>

<p>对最近一次的message做修改<br/>
<code>git commit --amend</code></p>

<h2 id="toc_4">rebase操作</h2>

<h3 id="toc_5">修改以往的任何一个commit的message(rebase)</h3>

<p>示例<br/>
<code><br/>
commit3<br/>
commit2<br/>
commit1<br/>
</code><br/>
我现在要，修改commit2,那么我就是git rebase -i commit1;以commit1作为基准,去修改其后面的commit信息。<br/>
rebase 命令的交互命令里有拿出commit,重新设置messge等操作。<br/>
修改后commit的commit号会发生变化。</p>

<h3 id="toc_6">合并以往的连续的几个commit（rebase）</h3>

<p>示例<br/>
<code><br/>
commit4<br/>
commit3<br/>
commit2<br/>
commit1<br/>
</code><br/>
合并commit2,与commit3为commit5;这样就会形成一个新的commit;</p>

<h3 id="toc_7">合并以往的不连续的commit(rebase)</h3>

<p>其实与前面一样，只是，列出commit ，然后描述命令</p>

<h2 id="toc_8">diff操作</h2>

<ul>
<li><p>比较工作区，索引区,HEAD的差异<br/>
<code>git diff --cached</code>  比较索引区域HEAD的差别比较<br/>
<code>git diff</code> 工作区与索引区的差别</p></li>
<li><p>比较不同分支的同一个文件的差异</p></li>
</ul>

<p><code>git diff temp master -- filename</code><br/>
temp是一个分支或者commitid，master是一个分支或者commitid；</p>

<h2 id="toc_9">恢复工作区，恢复索引区</h2>

<ul>
<li>清空工作区</li>
</ul>

<p><code>git checkout file</code><br/>
<code>git checkout .</code></p>

<ul>
<li>将加入索引的放入工作区</li>
</ul>

<p><code>git reset HEAD</code></p>

<ul>
<li>清除最近的几个commit</li>
</ul>

<p><code>git reset --hard  commitid</code></p>

<h2 id="toc_10">删除，重命名文件</h2>

<ul>
<li>重命名文件
<code>git mv filename1 filename2</code></li>
</ul>

<ul>
<li>删除文件
<code>git rm filename</code></li>
</ul>

<h2 id="toc_11">ignore文件</h2>

<p><code>.gitignore</code>告诉哪些不需要加入git的管理里</p>

			</div>

		
	  
		<footer>
		 <p class="meta">

			<strong>Categories:</strong>&nbsp; 
			<span class="categories">
			
			    <a class='category' href='Git%E5%B7%A5%E5%85%B7.html'>Git工具</a>&nbsp;
			 
			</span>
		    </p>
		    <p class="meta">
		      
		 </p>
	    
		<div class="sharing">
		  
          

          

		</div>

	    <p class="meta">
	    
	        <a class="basic-alignment left" href="15453886088422.html" 
	        title="Previous Post: 数据结构与算法之美(专栏)">&laquo; 数据结构与算法之美(专栏)</a>
	    
	    
	        <a class="basic-alignment right" href="15448598664160.html" 
	        title="Next Post: 网络协议总结">网络协议总结 &raquo;</a>
	    
	    </p>
	  </footer>
	</article>
</div>
 <aside class="sidebar"> 

	<section>
	  <h1>Categories</h1>
	  <ul id="recent_posts">
	  
	      <li class="post">
	        <a href="%E5%89%8D%E8%A8%80.html"><strong>前言&nbsp;(1)</strong></a>
	        
	        
	        
	      </li>
	  
	      <li class="post">
	        <a href="%E4%B8%AA%E4%BA%BA%E7%B3%BB%E7%BB%9F.html"><strong>个人系统&nbsp;(10)</strong></a>
	         <p class="cat-children-p"> 
	        
	        	<a href="%E6%8A%95%E8%B5%84%E7%AC%94%E8%AE%B0.html">投资笔记&nbsp;(9)</a>&nbsp;&nbsp;
	        
	         </p> 
	      </li>
	  
	      <li class="post">
	        <a href="%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B.html"><strong>软件工程&nbsp;(49)</strong></a>
	         <p class="cat-children-p"> 
	        
	        	<a href="%E7%AE%97%E6%B3%95.html">算法&nbsp;(8)</a>&nbsp;&nbsp;
	        
	        	<a href="%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE.html">网络协议&nbsp;(1)</a>&nbsp;&nbsp;
	        
	        	<a href="iOS%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5.html">iOS基础概念&nbsp;(11)</a>&nbsp;&nbsp;
	        
	        	<a href="iOS%E5%BC%80%E6%BA%90%E5%88%86%E6%9E%90.html">iOS开源分析&nbsp;(2)</a>&nbsp;&nbsp;
	        
	        	<a href="iOS%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96.html">iOS性能优化&nbsp;(6)</a>&nbsp;&nbsp;
	        
	        	<a href="iOS%E5%B7%A5%E5%85%B7%E6%B7%B1%E5%85%A5.html">iOS工具深入&nbsp;(2)</a>&nbsp;&nbsp;
	        
	        	<a href="shell%E8%84%9A%E6%9C%AC.html">shell脚本&nbsp;(9)</a>&nbsp;&nbsp;
	        
	        	<a href="C%E8%AF%AD%E8%A8%80%E6%8D%A1%E6%BC%8F.html">C语言捡漏&nbsp;(1)</a>&nbsp;&nbsp;
	        
	        	<a href="Git%E5%B7%A5%E5%85%B7.html">Git工具&nbsp;(3)</a>&nbsp;&nbsp;
	        
	        	<a href="iOS%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1.html">iOS架构设计&nbsp;(1)</a>&nbsp;&nbsp;
	        
	        	<a href="Swift.html">Swift&nbsp;(1)</a>&nbsp;&nbsp;
	        
	        	<a href="%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html">设计模式&nbsp;(4)</a>&nbsp;&nbsp;
	        
	         </p> 
	      </li>
	  
	      <li class="post">
	        <a href="%E9%9F%B3%E8%A7%86%E9%A2%91%E6%8A%80%E6%9C%AF.html"><strong>音视频技术&nbsp;(9)</strong></a>
	        
	        
	        
	      </li>
	   
	  </ul>
	</section>
	<section>
	  <h1>Recent Posts</h1>
	  <ul id="recent_posts">
	  
	      
		      <li class="post">
		        <a href="15512048926912.html">设计模式系列（四）-- 行为型</a>
		      </li>
	     
	  
	      
		      <li class="post">
		        <a href="15512048797799.html">设计模式系列（三）-- 结构型</a>
		      </li>
	     
	  
	      
		      <li class="post">
		        <a href="15512048653711.html">设计模式系列（二）--创建型设计模式</a>
		      </li>
	     
	  
	      
		      <li class="post">
		        <a href="15512048416439.html">设计模式系列（一）设计模式概要</a>
		      </li>
	     
	  
	      
		      <li class="post">
		        <a href="15512046578708.html">Swift梳理</a>
		      </li>
	     
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	   
	  </ul>
	</section>
	
</aside> </div></div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 -  -
  <span class="credit">Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a> &nbsp;&nbsp; Theme by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>

  
    




</body>
</html>
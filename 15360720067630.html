<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
    
  Cocoapods入门 - 北哥传奇
  
  </title>
  
  
  <link href="atom.xml" rel="alternate" title="北哥传奇" type="application/atom+xml">
    <link rel="stylesheet" href="asset/css/foundation.min.css" />
    <link rel="stylesheet" href="asset/css/docs.css" />
    <script src="asset/js/vendor/modernizr.js"></script>
    <script src="asset/js/vendor/jquery.js"></script>
  <script src="asset/highlightjs/highlight.pack.js"></script>
  <link href="asset/highlightjs/styles/github.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script>hljs.initHighlightingOnLoad();</script>
<script type="text/javascript">
  function before_search(){
    var searchVal = 'site:raojunbo.github.io ' + document.getElementById('search_input').value;
    document.getElementById('search_q').value = searchVal;
    return true;
  }
</script>
  </head>
  <body class="antialiased hide-extras">
    
    <div class="marketing off-canvas-wrap" data-offcanvas>
      <div class="inner-wrap">


<nav class="top-bar docs-bar hide-for-small" data-topbar>


  <section class="top-bar-section">
  <div class="row">
      <div style="position: relative;width:100%;"><div style="position: absolute; width:100%;">
        <ul id="main-menu" class="left">
        
        <li id=""><a target="self" href="index.html">Home</a></li>
        
        <li id=""><a target="_self" href="archives.html">Archives</a></li>
        
        </ul>

        <ul class="right" id="search-wrap">
          <li>
<form target="_blank" onsubmit="return before_search();" action="http://google.com/search" method="get">
    <input type="hidden" id="search_q" name="q" value="" />
    <input tabindex="1" type="search" id="search_input"  placeholder="Search"/>
</form>
</li>
          </ul>
      </div></div>
  </div>
  </section>

</nav>

        <nav class="tab-bar show-for-small">
  <a href="javascript:void(0)" class="left-off-canvas-toggle menu-icon">
    <span> &nbsp; 北哥传奇</span>
  </a>
</nav>

<aside class="left-off-canvas-menu">
      <ul class="off-canvas-list">
        
        <li><a target="self" href="index.html">Home</a></li>
        
        <li><a target="_self" href="archives.html">Archives</a></li>
        

    <li><label>Categories</label></li>

        
            <li><a href="%E5%89%8D%E8%A8%80.html">前言</a></li>
        
            <li><a href="%E7%AE%97%E6%B3%95.html">算法</a></li>
        
            <li><a href="iOS%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5.html">iOS基础概念</a></li>
        
            <li><a href="iOS%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96.html">iOS性能优化</a></li>
        
            <li><a href="iOS%E5%B7%A5%E5%85%B7%E6%B7%B1%E5%85%A5.html">iOS工具深入</a></li>
        
            <li><a href="shell%E8%84%9A%E6%9C%AC.html">shell脚本</a></li>
        
            <li><a href="C%E8%AF%AD%E8%A8%80%E6%8D%A1%E6%BC%8F.html">C语言捡漏</a></li>
        
            <li><a href="Git%E5%B7%A5%E5%85%B7.html">Git工具</a></li>
        
            <li><a href="iOS%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1.html">iOS架构设计</a></li>
        
            <li><a href="Swift.html">Swift</a></li>
        
            <li><a href="%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html">设计模式</a></li>
        
            <li><a href="%E9%9F%B3%E8%A7%86%E9%A2%91%E6%8A%80%E6%9C%AF.html">音视频技术</a></li>
        
            <li><a href="%E8%AF%81%E5%88%B8%E5%B8%82%E5%9C%BA%E6%8A%95%E8%B5%84%E9%80%BB%E8%BE%91.html">证券市场投资逻辑</a></li>
        
            <li><a href="%E8%8B%B1%E8%AF%AD%E8%83%BD%E5%8A%9B.html">英语能力</a></li>
         

      </ul>
    </aside>

<a class="exit-off-canvas" href="#"></a>


        <section id="main-content" role="main" class="scroll-container">
        
       

 <script type="text/javascript">
  $(function(){
    $('#menu_item_index').addClass('is_active');
  });
</script>
<div class="row">
  <div class="large-8 medium-8 columns">
      <div class="markdown-body article-wrap">
       <div class="article">
          
          <h1>Cocoapods入门</h1>
     
        <div class="read-more clearfix">
          <span class="date">2018/9/4</span>

          <span>posted in&nbsp;</span> 
          
              <span class="posted-in"><a href='iOS%E5%B7%A5%E5%85%B7%E6%B7%B1%E5%85%A5.html'>iOS工具深入</a></span>
           
         
          <span class="comments">
            

            
          </span>

        </div>
      </div><!-- article -->

      <div class="article-content">
      <h2 id="toc_0">一：安装</h2>

<ol>
<li><p>安装cocoapods</p>

<p><code>sudo gem install cocoapods</code></p></li>
</ol>

<ol>
<li><p>安装指定版本的cocoapods<br/>
在协同开发时，podfile文件会加入Git版本库，为了防止pod版本不一样，导致其他开发人员Pod时执行错误，所以协同开发时最好安装一样的版本号。</p>

<p><code>sudo gem install cocoapods -v 1.4</code></p></li>
</ol>

<h2 id="toc_1">二：初次使用</h2>

<ol>
<li><p>更新cocoapods的repo<br/>
如果是新电脑或者没有下载过repo执行<code>pod repo update</code>。这个耗时会很长，这个文件现在达到2G了。改repo下载完后在/Users/用户目录/.cocoapods（这个文件夹的作用将在后面说明）</p></li>
<li><p>生成podfile文件<br/>
在指定的xcode工程目录下执行<code>pod init</code>就会有一个Podfile文件生成，或者干脆从其他工程里拷贝一份过来也行。<br/>
编辑如</p>

<pre><code>platform:ios,&#39;7.1&#39;
pod &#39;SDWebImage&#39;, &#39;~&gt;3.7&#39;
pod &#39;AFNetworking&#39; 
</code></pre></li>
<li><p>查找相关库<br/>
有时为了查看要使用一个第三方库的指定版本号，<code>pod search AFNetworking</code>进行类似的查询，将会列出历史版本。</p></li>
<li><p>pod install 与pod update</p>

<ul>
<li><p><code>pod install</code><br/>
在podfile.lock不存在时，会根据podfile文件生成这个文件，并安装相应的库。存在时会根据podfile.lock文件下载与安装相应的库。</p></li>
<li><p><code>pod update</code><br/>
会根据podfile文件更新库，并更新podfile.lock文件。也就是pod update时，会检测podfile文件里有的库配置是没有指定版本号的就会取最新的版本号，重新下载与安装。</p></li>
<li><p><code>--no-repo-update</code><br/>
其主要的作用是用于在执行pod install和pod update两条命令是而执行的pod repo update的操作。pod repo update操作时间比较长，这也就是为什么平时我们加--no-repo-update的原因</p></li>
</ul></li>
</ol>

<h2 id="toc_2">三：podfile文件深入</h2>

<ol>
<li><p><code>pod &#39;框架名&#39; 参数</code><br/>
参数需要特别说明下</p>

<ul>
<li><p>指定版本号(这个版本号是spec文件)<br/>
’&gt;3.7&#39;  大于3.7版本<br/>
&#39;&gt;=3.7&#39; 大于等于3.7版本<br/>
&#39;<3.7' 小于3.7版本<br/>
'~>3.7&#39; 大于等于3.7并且小于3.8版本（这个参数有意思，经常使用的也是这个参数）</p></li>
<li><p>指定path,branch,tag,commit<br/>
:branch =&gt; &#39;branch名&#39;<br/>
:tag =&gt; &#39;tag名&#39;<br/>
:commit =&gt; &#39;提交号&#39;<br/>
:path =&gt; &#39;~/Documents/AFNetworking&#39;</p></li>
</ul></li>
<li><p>platform<br/>
platform :ios, &#39;7.0&#39;。说希望采用iOS7.0的进行编译<br/>
最好进行指定，不指定的化，会采用默认的，因为有些库指定了最低的ios版本所以，不指定的化可能编译不过</p></li>
<li><p>target<br/>
如果不指定的化，就默认是全部的target。有些时候我向在一个target里有，在其他target没有，这是就可以采用下面指定target指定需要的库</p>

<pre><code>target &#39;TRapidCalculation&#39; do
//写你要的库
end
target &#39;TRapidCalculation_auto&#39; do
//写你要的库
end
</code></pre></li>
<li><p>use_frameworks!<br/>
这个指明编译成动态库，而不是静态库，特别是在使用Swift库的过程中，特别需要使用这句，swift里。不过他会把所有项目的编译动态库，这一点有点不好。不过在使用Swift库的过程中就没办法了。</p></li>
<li><p>source<br/>
Cocoapods从哪些仓库(装有Spec文件的repo)中获得框架的源代码。（至于什么是Spec我将在后面建立私有库里做说明）我们使用公开的第三库时都是使用的<code>source &#39;https://github.com/CocoaPods/Specs.git&#39;</code>这个源。在做私有库时，可以引用自己源如我的<code>source  &#39;git@gitee.com:BlueLegend/BlueLegendPrivateSpec.git&#39;</code></p></li>
<li><p>podfile文件示例</p></li>
</ol>

<pre><code>#公用的私有远程索引库源
source  &#39;git@gitee.com:BlueLegend/BlueLegendPrivateSpec.git&#39;
#github远程索引库源
source &#39;https://github.com/CocoaPods/Specs.git&#39;
platform :ios, &#39;8.0&#39;

target ‘CoreConcept’ do
    pod &#39;lottie-ios&#39;
    pod &#39;Masonry&#39;
    pod &#39;SDWebImage&#39;, &#39;~&gt; 4.3.0&#39;
    pod &#39;YYModel&#39;, &#39;~&gt; 1.0.4&#39;
    pod &#39;YYCache&#39;, &#39;~&gt; 1.0.4&#39;
    pod &#39;YYText&#39;, &#39;~&gt; 1.0.7&#39;
    pod &#39;BlocksKit&#39;, &#39;~&gt; 2.2.5&#39;
    pod &#39;MJRefresh&#39;, &#39;~&gt; 3.1.15.3&#39;
    pod &#39;KBRCategory&#39;
    pod &#39;HyphenateLite&#39;
end
</code></pre>

<h2 id="toc_3">四：podfile.lock文件深入</h2>

<p>Podfile.lock 文件主要包含三个块：<br/>
PODS 用来记录每个pod的版本号<br/>
DEPENDENCIES 依赖的其他库<br/>
SPEC CHECKSUMS 每个库对应的podspec.json文件的checksum(SHA-1算法)。<br/>
通过这些信息可以确保多人协作的时候，大家使用的是相同版本的第三方库。</p>

<p>当团队中的某个人执行完pod install命令后，生成的Podfile.lock文件就记录下了当时最新Pods依赖库的版本，这时团队中的其它人check下来这份包含Podfile.lock文件的工程以后，再去执行pod install命令时，获取下来的Pods依赖库的版本就和最开始用户获取到的版本一致。如果没有Podfile.lock文件，后续所有用户执行pod install命令都会获取最新版本的SBJson，这就有可能造成同一个团队使用的依赖库版本不一致，这对团队协作来说绝对是个灾难!</p>

<h2 id="toc_4">五：Manifest.lock文件</h2>

<p>Manifest.lock文件格式与podfile.lock文件是一样的。主要用来对比远程与本地安装文件是否一样。<br/>
Manifest.lock是你的本地的清单，在你没做任何操作时时与podfile.lock文件内容一样的。但当你git pull 从其他开发人员那里拿到了podfile.lock文件，其他开发人员可能修改了podfile.lock文件，就造成安装清单不一致。需要你pod install重新安装，Manifest.lock这个文件，重新保持了两个文件的一致性。所以我们在工程文件里编译脚本里有这两个文件的比较。</p>

<pre><code>diff &quot;${PODS_PODFILE_DIR_PATH}/Podfile.lock&quot; &quot;${PODS_ROOT}/Manifest.lock&quot; &gt; /dev/null
if [ $? != 0 ] ; then
    # print error to STDERR
    echo &quot;error: The sandbox is not in sync with the Podfile.lock. Run &#39;pod install&#39; or update your CocoaPods installation.&quot; &gt;&amp;2
    exit 1
fi
# This output is used by Xcode &#39;outputs&#39; to avoid re-running this script phase.
echo &quot;SUCCESS&quot; &gt; &quot;${SCRIPT_OUTPUT_FILE_0}&quot;

</code></pre>

<p>还是给个截图解释下<br/>
/bin/sh  是指定脚本解释器（这里是shell脚本解释器）<br/>
inputFile 就是Podfile.lock文件与Mainifest.lock</p>

<p><img src="media/15360720067630/Xnip2018-09-05_14-26-04.png" alt="Xnip2018-09-05_14-26-04"/></p>


    

      </div>

      <div class="row">
        <div class="large-6 columns">
        <p class="text-left" style="padding:15px 0px;">
      
          <a href="15361293454277.html" 
          title="Previous Post: 利用Cocoapods构建自己的私有与公有库">&laquo; 利用Cocoapods构建自己的私有与公有库</a>
      
        </p>
        </div>
        <div class="large-6 columns">
      <p class="text-right" style="padding:15px 0px;">
      
          <a  href="15358111534341.html" 
          title="Next Post: Runtime系列二 消息机制">Runtime系列二 消息机制 &raquo;</a>
      
      </p>
        </div>
      </div>
      <div class="comments-wrap">
        <div class="share-comments">
          

          

          
        </div>
      </div>
    </div><!-- article-wrap -->
  </div><!-- large 8 -->




 <div class="large-4 medium-4 columns">
  <div class="hide-for-small">
    <div id="sidebar" class="sidebar">
          <div id="site-info" class="site-info">
            
                <h1>北哥传奇</h1>
                <div class="site-des"></div>
                <div class="social">











  <a target="_blank" class="rss" href="atom.xml" title="RSS">RSS</a>
                
              	 </div>
          	</div>

             

              <div id="site-categories" class="side-item ">
                <div class="side-header">
                  <h2>Categories</h2>
                </div>
                <div class="side-content">

      	<p class="cat-list">
        
            <a href="%E5%89%8D%E8%A8%80.html"><strong>前言</strong></a>
        
            <a href="%E7%AE%97%E6%B3%95.html"><strong>算法</strong></a>
        
            <a href="iOS%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5.html"><strong>iOS基础概念</strong></a>
        
            <a href="iOS%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96.html"><strong>iOS性能优化</strong></a>
        
            <a href="iOS%E5%B7%A5%E5%85%B7%E6%B7%B1%E5%85%A5.html"><strong>iOS工具深入</strong></a>
        
            <a href="shell%E8%84%9A%E6%9C%AC.html"><strong>shell脚本</strong></a>
        
            <a href="C%E8%AF%AD%E8%A8%80%E6%8D%A1%E6%BC%8F.html"><strong>C语言捡漏</strong></a>
        
            <a href="Git%E5%B7%A5%E5%85%B7.html"><strong>Git工具</strong></a>
        
            <a href="iOS%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1.html"><strong>iOS架构设计</strong></a>
        
            <a href="Swift.html"><strong>Swift</strong></a>
        
            <a href="%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html"><strong>设计模式</strong></a>
        
            <a href="%E9%9F%B3%E8%A7%86%E9%A2%91%E6%8A%80%E6%9C%AF.html"><strong>音视频技术</strong></a>
        
            <a href="%E8%AF%81%E5%88%B8%E5%B8%82%E5%9C%BA%E6%8A%95%E8%B5%84%E9%80%BB%E8%BE%91.html"><strong>证券市场投资逻辑</strong></a>
        
            <a href="%E8%8B%B1%E8%AF%AD%E8%83%BD%E5%8A%9B.html"><strong>英语能力</strong></a>
         
        </p>


                </div>
              </div>

              <div id="site-categories" class="side-item">
                <div class="side-header">
                  <h2>Recent Posts</h2>
                </div>
                <div class="side-content">
                <ul class="posts-list">
	      
		      
			      <li class="post">
			        <a href="15526311929031.html">iOS 基于CoreText题型渲染引擎主题讨论</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="15515878249617.html">威科夫中阶课程（六,七，八）</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="15515336874984.html">我为什么写作？</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="15514275216080.html">敏捷开发流程实践</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="15512048926912.html">设计模式系列（四）-- 行为型</a>
			      </li>
		     
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		   
		  		</ul>
                </div>
              </div>
        </div><!-- sidebar -->
      </div><!-- hide for small -->
</div><!-- large 4 -->

</div><!-- row -->

 <div class="page-bottom clearfix">
  <div class="row">
   <p class="copyright">Copyright &copy; 2015
Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a>,&nbsp; 
Theme used <a target="_blank" href="http://github.com">GitHub CSS</a>.</p>
  </div>
</div>

        </section>
      </div>
    </div>

  
    

    <script src="asset/js/foundation.min.js"></script>
    <script>
      $(document).foundation();
      function fixSidebarHeight(){
        var w1 = $('.markdown-body').height();
          var w2 = $('#sidebar').height();
          if (w1 > w2) { $('#sidebar').height(w1); };
      }
      $(function(){
        fixSidebarHeight();
      })
      $(window).load(function(){
          fixSidebarHeight();
      });
     
    </script>

    



  </body>
</html>

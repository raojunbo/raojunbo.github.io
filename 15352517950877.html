<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
    
  深入理解Git - 北哥传奇
  
  </title>
 <meta name="description" content="">
 <link href="atom.xml" rel="alternate" title="北哥传奇" type="application/atom+xml">
    <link rel="stylesheet" href="asset/css/foundation.min.css" />
    <link rel="stylesheet" href="asset/css/docs.css" />

    <script src="asset/js/vendor/modernizr.js"></script>
    <script src="asset/js/vendor/jquery.js"></script>
    <script src="asset/highlightjs/highlight.pack.js"></script>
    <link href="asset/highlightjs/styles/github.css" media="screen, projection" rel="stylesheet" type="text/css">
    <script>hljs.initHighlightingOnLoad();</script>
    
  </head>
  <body class="antialiased hide-extras">
    
    <div class="marketing off-canvas-wrap" data-offcanvas>
      <div class="inner-wrap">


<nav class="top-bar docs-bar hide-for-small" data-topbar>

<div id="header">
    <h1><a href="index.html">北哥传奇</a></h1>
</div>

</nav>
        <nav class="tab-bar show-for-small">
  <a href="javascript:void(0)" class="left-off-canvas-toggle menu-icon">
    <span> &nbsp; 北哥传奇</span>
  </a>
</nav>

<aside class="left-off-canvas-menu">
      <ul class="off-canvas-list">
      <li><a href="index.html">Home</a></li>
      
        <li class="divider"></li>
        <li><label>前言</label></li>

          
            <li><a title="我为什么写作？" href="15515336874984.html">我为什么写作？</a></li>
          
            <li><a title="开始自己的博客啦" href="15346723413820.html">开始自己的博客啦</a></li>
          

      
        <li class="divider"></li>
        <li><label>算法</label></li>

          
            <li><a title="数据结构与算法之美(专栏)" href="15453886088422.html">数据结构与算法之美(专栏)</a></li>
          
            <li><a title="OFFER 第2章 基础知识" href="15383938776397.html">OFFER 第2章 基础知识</a></li>
          
            <li><a title="OFFER 第6章" href="15381309314963.html">OFFER 第6章</a></li>
          
            <li><a title="OFFER 第4章 解决问题的思路与方法" href="15381303838316.html">OFFER 第4章 解决问题的思路与方法</a></li>
          
            <li><a title="OFFER 第5章 优化时间效率与空间效率" href="15380441185875.html">OFFER 第5章 优化时间效率与空间效率</a></li>
          
            <li><a title="OFFER 第3章 高质量的代码" href="15379486241928.html">OFFER 第3章 高质量的代码</a></li>
          
            <li><a title="OFFER" href="15372661258374.html">OFFER</a></li>
          
            <li><a title="《算法图解》" href="15371495937899.html">《算法图解》</a></li>
          

      
        <li class="divider"></li>
        <li><label>iOS基础概念</label></li>

          
            <li><a title="GCD源码核心概念" href="15462987177847.html">GCD源码核心概念</a></li>
          
            <li><a title="iOS UI视图相关深入" href="15459973166637.html">iOS UI视图相关深入</a></li>
          
            <li><a title="GCD" href="15364733386397.html">GCD</a></li>
          
            <li><a title="Runtime系列二 消息机制" href="15358111534341.html">Runtime系列二 消息机制</a></li>
          
            <li><a title="Runtime系列一 Objective-C对象模型" href="15351908674819.html">Runtime系列一 Objective-C对象模型</a></li>
          
            <li><a title="HTTP/HTTPS协议" href="15349190375007.html">HTTP/HTTPS协议</a></li>
          
            <li><a title="深入理解Object-C的Category" href="15346751968513.html">深入理解Object-C的Category</a></li>
          
            <li><a title="RunLoop思考与总结" href="15346749374335.html">RunLoop思考与总结</a></li>
          
            <li><a title="KVO-KVC" href="15346747750773.html">KVO-KVC</a></li>
          
            <li><a title="iOS内存管理" href="15346744072286.html">iOS内存管理</a></li>
          
            <li><a title="Block" href="15346720571289.html">Block</a></li>
          

      
        <li class="divider"></li>
        <li><label>iOS性能优化</label></li>

          
            <li><a title="iOS 基于CoreText题型渲染引擎主题讨论" href="15526311929031.html">iOS 基于CoreText题型渲染引擎主题讨论</a></li>
          
            <li><a title="墨迹启动性能优化方案" href="15522762874599.html">墨迹启动性能优化方案</a></li>
          
            <li><a title="墨迹天气启动优化技术汇总" href="15519481732502.html">墨迹天气启动优化技术汇总</a></li>
          
            <li><a title="墨迹天气App启动时间分析" href="15518431320651.html">墨迹天气App启动时间分析</a></li>
          
            <li><a title="Xcode里的Instruments的应用" href="15454940280965.html">Xcode里的Instruments的应用</a></li>
          
            <li><a title="xcode项目编译过程" href="15378464323310.html">xcode项目编译过程</a></li>
          
            <li><a title="iOS如何将像素显示到屏幕" href="15362957172406.html">iOS如何将像素显示到屏幕</a></li>
          
            <li><a title="iOS保持界面流畅的技巧（性能优化）" href="15351910189854.html">iOS保持界面流畅的技巧（性能优化）</a></li>
          
            <li><a title="组件化系列（一） 组件化原理及方案" href="15351909215000.html">组件化系列（一） 组件化原理及方案</a></li>
          
            <li><a title="iOS APP启动如何优化" href="15346749892115.html">iOS APP启动如何优化</a></li>
          

      
        <li class="divider"></li>
        <li><label>iOS工具深入</label></li>

          
            <li><a title="敏捷开发流程实践" href="15514275216080.html">敏捷开发流程实践</a></li>
          
            <li><a title="利用Cocoapods构建自己的私有与公有库" href="15361293454277.html">利用Cocoapods构建自己的私有与公有库</a></li>
          
            <li><a title="Cocoapods入门" href="15360720067630.html">Cocoapods入门</a></li>
          

      
        <li class="divider"></li>
        <li><label>shell脚本</label></li>

          
            <li><a title="shell脚本知识梳理（八）文本处理" href="15443591203562.html">shell脚本知识梳理（八）文本处理</a></li>
          
            <li><a title="shell脚本知识梳理 （六）函数" href="15443590303184.html">shell脚本知识梳理 （六）函数</a></li>
          
            <li><a title="shell脚本知识梳理（零）linux 基础命令" href="15443316930228.html">shell脚本知识梳理（零）linux 基础命令</a></li>
          
            <li><a title="shell脚本知识梳理（七）SQL应用处理" href="15442673526076.html">shell脚本知识梳理（七）SQL应用处理</a></li>
          
            <li><a title="shell脚本知识梳理（五）输出" href="15441102869614.html">shell脚本知识梳理（五）输出</a></li>
          
            <li><a title="shell脚本知识梳理（三） 流程控制" href="15440981221870.html">shell脚本知识梳理（三） 流程控制</a></li>
          
            <li><a title="shell脚本知识梳理（二）test命令的条件" href="15440910992060.html">shell脚本知识梳理（二）test命令的条件</a></li>
          
            <li><a title="shell脚本知识梳理（四）输入" href="15440719029358.html">shell脚本知识梳理（四）输入</a></li>
          
            <li><a title="shell脚本知识梳理（一）之变量" href="15426405220672.html">shell脚本知识梳理（一）之变量</a></li>
          

      
        <li class="divider"></li>
        <li><label>C语言捡漏</label></li>

          
            <li><a title="C语言拾遗" href="15444947240000.html">C语言拾遗</a></li>
          

      
        <li class="divider"></li>
        <li><label>Git工具</label></li>

          
            <li><a title="Git 拾遗" href="15453592839286.html">Git 拾遗</a></li>
          
            <li><a title="rebase" href="15353730636847.html">rebase</a></li>
          
            <li><a title="详解Git里的Rebase操作" href="15352828379687.html">详解Git里的Rebase操作</a></li>
          
            <li><a title="深入理解Git" href="15352517950877.html">深入理解Git</a></li>
          

      
        <li class="divider"></li>
        <li><label>iOS架构设计</label></li>

          
            <li><a title="讨论架构时是在说什么" href="15458865236455.html">讨论架构时是在说什么</a></li>
          

      
        <li class="divider"></li>
        <li><label>Swift</label></li>

          
            <li><a title="Swift梳理" href="15512046578708.html">Swift梳理</a></li>
          

      
        <li class="divider"></li>
        <li><label>设计模式</label></li>

          
            <li><a title="设计模式系列（四）-- 行为型" href="15512048926912.html">设计模式系列（四）-- 行为型</a></li>
          
            <li><a title="设计模式系列（三）-- 结构型" href="15512048797799.html">设计模式系列（三）-- 结构型</a></li>
          
            <li><a title="设计模式系列（二）--创建型设计模式" href="15512048653711.html">设计模式系列（二）--创建型设计模式</a></li>
          
            <li><a title="设计模式系列（一）设计模式概要" href="15512048416439.html">设计模式系列（一）设计模式概要</a></li>
          

      
        <li class="divider"></li>
        <li><label>音视频技术</label></li>

          
            <li><a title="基础实践系列之编译成iOS可用的.a静态库" href="15429406911904.html">基础实践系列之编译成iOS可用的.a静态库</a></li>
          
            <li><a title="FFMPEG视音频基础探索-命令行(系列一)" href="15427812231625.html">FFMPEG视音频基础探索-命令行(系列一)</a></li>
          
            <li><a title="UDP-RTP协议解析（基础系列六）" href="15427692957422.html">UDP-RTP协议解析（基础系列六）</a></li>
          
            <li><a title="FLV封装格式解析（基础系列五）" href="15427076070232.html">FLV封装格式解析（基础系列五）</a></li>
          
            <li><a title="AAC音频码流解析（基础系列四）" href="15427004394453.html">AAC音频码流解析（基础系列四）</a></li>
          
            <li><a title="H.264视频码流解析（基础系列三）" href="15426950827326.html">H.264视频码流解析（基础系列三）</a></li>
          
            <li><a title="音频采样数据处理（基础系列二）" href="15426806992852.html">音频采样数据处理（基础系列二）</a></li>
          
            <li><a title="视频像素数据处理(基础系列一)" href="15426223369165.html">视频像素数据处理(基础系列一)</a></li>
          
            <li><a title="[TOC]" href="15420339112607.html">[TOC]</a></li>
          

      
        <li class="divider"></li>
        <li><label>证券市场投资逻辑</label></li>

          
            <li><a title="威科夫中阶课程（六,七，八）" href="15515878249617.html">威科夫中阶课程（六,七，八）</a></li>
          
            <li><a title="威科夫中阶课程（五）" href="15509867976030.html">威科夫中阶课程（五）</a></li>
          
            <li><a title="威科夫中阶课程（四）" href="15507609402868.html">威科夫中阶课程（四）</a></li>
          
            <li><a title="威科夫中阶课程（三）" href="15503292008544.html">威科夫中阶课程（三）</a></li>
          
            <li><a title="威科夫中阶课程（二）" href="15486866737545.html">威科夫中阶课程（二）</a></li>
          
            <li><a title="威科夫中阶课程(一)" href="15486697437875.html">威科夫中阶课程(一)</a></li>
          
            <li><a title="读《韭菜的自我修养》" href="15370049486631.html">读《韭菜的自我修养》</a></li>
          

      
        <li class="divider"></li>
        <li><label>英语能力</label></li>

          
            <li><a title="英语语法梳理【总结】" href="15423493216966.html">英语语法梳理【总结】</a></li>
          

      
      </ul>
    </aside>

<a class="exit-off-canvas" href="#"></a>

        <section id="main-content" role="main" class="scroll-container">

          <div class="row">
            <div class="large-3 medium-3 columns">
              <div class="hide-for-small">
                <div class="sidebar">

                <nav>
                  <ul id="side-nav" class="side-nav">

                    
                      <li class="side-title"><span>前言</span></li>
                        
                          <li><a title="我为什么写作？" href="15515336874984.html">我为什么写作？</a></li>
                        
                          <li><a title="开始自己的博客啦" href="15346723413820.html">开始自己的博客啦</a></li>
                        


                    
                      <li class="side-title"><span>算法</span></li>
                        
                          <li><a title="数据结构与算法之美(专栏)" href="15453886088422.html">数据结构与算法之美(专栏)</a></li>
                        
                          <li><a title="OFFER 第2章 基础知识" href="15383938776397.html">OFFER 第2章 基础知识</a></li>
                        
                          <li><a title="OFFER 第6章" href="15381309314963.html">OFFER 第6章</a></li>
                        
                          <li><a title="OFFER 第4章 解决问题的思路与方法" href="15381303838316.html">OFFER 第4章 解决问题的思路与方法</a></li>
                        
                          <li><a title="OFFER 第5章 优化时间效率与空间效率" href="15380441185875.html">OFFER 第5章 优化时间效率与空间效率</a></li>
                        
                          <li><a title="OFFER 第3章 高质量的代码" href="15379486241928.html">OFFER 第3章 高质量的代码</a></li>
                        
                          <li><a title="OFFER" href="15372661258374.html">OFFER</a></li>
                        
                          <li><a title="《算法图解》" href="15371495937899.html">《算法图解》</a></li>
                        


                    
                      <li class="side-title"><span>iOS基础概念</span></li>
                        
                          <li><a title="GCD源码核心概念" href="15462987177847.html">GCD源码核心概念</a></li>
                        
                          <li><a title="iOS UI视图相关深入" href="15459973166637.html">iOS UI视图相关深入</a></li>
                        
                          <li><a title="GCD" href="15364733386397.html">GCD</a></li>
                        
                          <li><a title="Runtime系列二 消息机制" href="15358111534341.html">Runtime系列二 消息机制</a></li>
                        
                          <li><a title="Runtime系列一 Objective-C对象模型" href="15351908674819.html">Runtime系列一 Objective-C对象模型</a></li>
                        
                          <li><a title="HTTP/HTTPS协议" href="15349190375007.html">HTTP/HTTPS协议</a></li>
                        
                          <li><a title="深入理解Object-C的Category" href="15346751968513.html">深入理解Object-C的Category</a></li>
                        
                          <li><a title="RunLoop思考与总结" href="15346749374335.html">RunLoop思考与总结</a></li>
                        
                          <li><a title="KVO-KVC" href="15346747750773.html">KVO-KVC</a></li>
                        
                          <li><a title="iOS内存管理" href="15346744072286.html">iOS内存管理</a></li>
                        
                          <li><a title="Block" href="15346720571289.html">Block</a></li>
                        


                    
                      <li class="side-title"><span>iOS性能优化</span></li>
                        
                          <li><a title="iOS 基于CoreText题型渲染引擎主题讨论" href="15526311929031.html">iOS 基于CoreText题型渲染引擎主题讨论</a></li>
                        
                          <li><a title="墨迹启动性能优化方案" href="15522762874599.html">墨迹启动性能优化方案</a></li>
                        
                          <li><a title="墨迹天气启动优化技术汇总" href="15519481732502.html">墨迹天气启动优化技术汇总</a></li>
                        
                          <li><a title="墨迹天气App启动时间分析" href="15518431320651.html">墨迹天气App启动时间分析</a></li>
                        
                          <li><a title="Xcode里的Instruments的应用" href="15454940280965.html">Xcode里的Instruments的应用</a></li>
                        
                          <li><a title="xcode项目编译过程" href="15378464323310.html">xcode项目编译过程</a></li>
                        
                          <li><a title="iOS如何将像素显示到屏幕" href="15362957172406.html">iOS如何将像素显示到屏幕</a></li>
                        
                          <li><a title="iOS保持界面流畅的技巧（性能优化）" href="15351910189854.html">iOS保持界面流畅的技巧（性能优化）</a></li>
                        
                          <li><a title="组件化系列（一） 组件化原理及方案" href="15351909215000.html">组件化系列（一） 组件化原理及方案</a></li>
                        
                          <li><a title="iOS APP启动如何优化" href="15346749892115.html">iOS APP启动如何优化</a></li>
                        


                    
                      <li class="side-title"><span>iOS工具深入</span></li>
                        
                          <li><a title="敏捷开发流程实践" href="15514275216080.html">敏捷开发流程实践</a></li>
                        
                          <li><a title="利用Cocoapods构建自己的私有与公有库" href="15361293454277.html">利用Cocoapods构建自己的私有与公有库</a></li>
                        
                          <li><a title="Cocoapods入门" href="15360720067630.html">Cocoapods入门</a></li>
                        


                    
                      <li class="side-title"><span>shell脚本</span></li>
                        
                          <li><a title="shell脚本知识梳理（八）文本处理" href="15443591203562.html">shell脚本知识梳理（八）文本处理</a></li>
                        
                          <li><a title="shell脚本知识梳理 （六）函数" href="15443590303184.html">shell脚本知识梳理 （六）函数</a></li>
                        
                          <li><a title="shell脚本知识梳理（零）linux 基础命令" href="15443316930228.html">shell脚本知识梳理（零）linux 基础命令</a></li>
                        
                          <li><a title="shell脚本知识梳理（七）SQL应用处理" href="15442673526076.html">shell脚本知识梳理（七）SQL应用处理</a></li>
                        
                          <li><a title="shell脚本知识梳理（五）输出" href="15441102869614.html">shell脚本知识梳理（五）输出</a></li>
                        
                          <li><a title="shell脚本知识梳理（三） 流程控制" href="15440981221870.html">shell脚本知识梳理（三） 流程控制</a></li>
                        
                          <li><a title="shell脚本知识梳理（二）test命令的条件" href="15440910992060.html">shell脚本知识梳理（二）test命令的条件</a></li>
                        
                          <li><a title="shell脚本知识梳理（四）输入" href="15440719029358.html">shell脚本知识梳理（四）输入</a></li>
                        
                          <li><a title="shell脚本知识梳理（一）之变量" href="15426405220672.html">shell脚本知识梳理（一）之变量</a></li>
                        


                    
                      <li class="side-title"><span>C语言捡漏</span></li>
                        
                          <li><a title="C语言拾遗" href="15444947240000.html">C语言拾遗</a></li>
                        


                    
                      <li class="side-title"><span>Git工具</span></li>
                        
                          <li><a title="Git 拾遗" href="15453592839286.html">Git 拾遗</a></li>
                        
                          <li><a title="rebase" href="15353730636847.html">rebase</a></li>
                        
                          <li><a title="详解Git里的Rebase操作" href="15352828379687.html">详解Git里的Rebase操作</a></li>
                        
                          <li><a title="深入理解Git" href="15352517950877.html">深入理解Git</a></li>
                        


                    
                      <li class="side-title"><span>iOS架构设计</span></li>
                        
                          <li><a title="讨论架构时是在说什么" href="15458865236455.html">讨论架构时是在说什么</a></li>
                        


                    
                      <li class="side-title"><span>Swift</span></li>
                        
                          <li><a title="Swift梳理" href="15512046578708.html">Swift梳理</a></li>
                        


                    
                      <li class="side-title"><span>设计模式</span></li>
                        
                          <li><a title="设计模式系列（四）-- 行为型" href="15512048926912.html">设计模式系列（四）-- 行为型</a></li>
                        
                          <li><a title="设计模式系列（三）-- 结构型" href="15512048797799.html">设计模式系列（三）-- 结构型</a></li>
                        
                          <li><a title="设计模式系列（二）--创建型设计模式" href="15512048653711.html">设计模式系列（二）--创建型设计模式</a></li>
                        
                          <li><a title="设计模式系列（一）设计模式概要" href="15512048416439.html">设计模式系列（一）设计模式概要</a></li>
                        


                    
                      <li class="side-title"><span>音视频技术</span></li>
                        
                          <li><a title="基础实践系列之编译成iOS可用的.a静态库" href="15429406911904.html">基础实践系列之编译成iOS可用的.a静态库</a></li>
                        
                          <li><a title="FFMPEG视音频基础探索-命令行(系列一)" href="15427812231625.html">FFMPEG视音频基础探索-命令行(系列一)</a></li>
                        
                          <li><a title="UDP-RTP协议解析（基础系列六）" href="15427692957422.html">UDP-RTP协议解析（基础系列六）</a></li>
                        
                          <li><a title="FLV封装格式解析（基础系列五）" href="15427076070232.html">FLV封装格式解析（基础系列五）</a></li>
                        
                          <li><a title="AAC音频码流解析（基础系列四）" href="15427004394453.html">AAC音频码流解析（基础系列四）</a></li>
                        
                          <li><a title="H.264视频码流解析（基础系列三）" href="15426950827326.html">H.264视频码流解析（基础系列三）</a></li>
                        
                          <li><a title="音频采样数据处理（基础系列二）" href="15426806992852.html">音频采样数据处理（基础系列二）</a></li>
                        
                          <li><a title="视频像素数据处理(基础系列一)" href="15426223369165.html">视频像素数据处理(基础系列一)</a></li>
                        
                          <li><a title="[TOC]" href="15420339112607.html">[TOC]</a></li>
                        


                    
                      <li class="side-title"><span>证券市场投资逻辑</span></li>
                        
                          <li><a title="威科夫中阶课程（六,七，八）" href="15515878249617.html">威科夫中阶课程（六,七，八）</a></li>
                        
                          <li><a title="威科夫中阶课程（五）" href="15509867976030.html">威科夫中阶课程（五）</a></li>
                        
                          <li><a title="威科夫中阶课程（四）" href="15507609402868.html">威科夫中阶课程（四）</a></li>
                        
                          <li><a title="威科夫中阶课程（三）" href="15503292008544.html">威科夫中阶课程（三）</a></li>
                        
                          <li><a title="威科夫中阶课程（二）" href="15486866737545.html">威科夫中阶课程（二）</a></li>
                        
                          <li><a title="威科夫中阶课程(一)" href="15486697437875.html">威科夫中阶课程(一)</a></li>
                        
                          <li><a title="读《韭菜的自我修养》" href="15370049486631.html">读《韭菜的自我修养》</a></li>
                        


                    
                      <li class="side-title"><span>英语能力</span></li>
                        
                          <li><a title="英语语法梳理【总结】" href="15423493216966.html">英语语法梳理【总结】</a></li>
                        


                    
                  </ul>
                </nav>
                </div>
              </div>
            </div>
            <div class="large-9 medium-9 columns">

 <div class="markdown-body">
<h1>深入理解Git</h1>

<p>本篇文章是对使用Git的使用的概述。然后对几个忽略的概念做了一下重新理解。</p>

<ul>
<li>
<a href="#toc_0">一：Git 文件管理</a>
</li>
<li>
<a href="#toc_1">二：Git分支操作</a>
</li>
<li>
<a href="#toc_2">三：Git提交操作</a>
</li>
<li>
<a href="#toc_3">四：Git的Diff操作</a>
</li>
<li>
<a href="#toc_4">五：远程版本库</a>
<ul>
<li>
<a href="#toc_5">重点解释了“本地分支”，“本地追踪分支”，“远程追踪分支”区别</a>
</li>
</ul>
</li>
<li>
<a href="#toc_6">六：多个仓库可以共用一个对象库吗？（很重要，初学时的疑惑点）</a>
</li>
<li>
<a href="#toc_7">七：解释fast-forward，non-fast-forward</a>
</li>
<li>
<a href="#toc_8">八：解释git rebase ，git cherry-pick</a>
<ul>
<li>
<a href="#toc_9">者两命令，不常用，但有时能解决关键问题</a>
</li>
</ul>
</li>
<li>
<a href="#toc_10">九：提交范围(很重要)</a>
</li>
<li>
<a href="#toc_11">十：多人协作开发时，造成起点分叉的原因(还待研究)</a>
</li>
</ul>


<h2 id="toc_0">一：Git 文件管理</h2>

<ul>
<li><p>工作目录<br/>
纯净的工作文件</p></li>
<li><p>索引<br/>
git add命令，将对象添加到对象库中，维持一个新的目录树，这个目录树在工作区没有再次改变时是与工作区相同的目录树。新添加的修改与对象库里的目录树是不同的。而这些新添加的就是待提交到对象库里的修改。</p></li>
<li><p>对象库<br/>
包括，提交对象(commit)，目录树对象（tree），实际的数据(blob)，标签(tag)；<br/>
blob对应正真的数据,文件的每个一版本。<br/>
tree对应目录。树对象下可以有其他数，最终都会有blob的指向<br/>
commit对应提交。对应当前目录树的一个完整快照</p>

<p><strong>从总体上来理解，就是工作目录，索引，对象库，都有一个目录树。从编辑，git add ,git commit，的三个过程，就是目录树的同步工作。当然对象库里的commit是某个目录树的引用即快照。这就快照就是目录树，而这个目录树维持着blob的数据。而commit就记录着作者日志等信息。而commit实际上是链表，将一个个commit串联起来，构成一个分支开发线。</strong></p></li>
</ul>

<h2 id="toc_1">二：Git分支操作</h2>

<p>远程追踪分支(追踪远程分支)，本地追踪分支(追踪&quot;远程追踪分支&quot;)，本地分支（谁也不追踪,自己玩,不具有pull功能）</p>

<ul>
<li><p>分支管理<br/>
git show-branch<br/>
git branch -d &quot;branchname&quot;<br/>
git branch<br/>
git branch -r<br/>
git branch -a<br/>
git branch -d<br/>
git branch -D<br/>
git branch testbranch //从当前commit创建分支<br/>
git branch testbranch2 commitID //从指定的commit创建分支</p></li>
<li><p>分支合并<br/>
<strong>HEAD 当前引用<br/>
FETCH_HEAD 远程跟踪分支的最新<br/>
ORIGIN_HEAD 本分支合并前的commit号或者是reset前的commit号<br/>
MERGE_HEAD 合并时别人的分支的commit号(在有冲突时,哈哈)</strong></p></li>
</ul>

<p>所有对对分支的操作都应该在本地操作。</p>

<h2 id="toc_2">三：Git提交操作</h2>

<ul>
<li><p>git reset  git reset 精髓是--soft ,--mixed,--hard，三者对于head指向，索引树，工作目录的影响。</p>

<p><code>git reset --soft 提交</code> 会将HEAD引用指向给定提交,相当于是将后面对commit的提交的修改重新放入了索引里；(<strong>commit树与索引树不同</strong>)</p>

<p><code>git reset --mixed 提交</code> 会将HEAD指向给定提交，索引内容改变以符合给定提交的树。相当于是将后这个提交的后面的带面放到工作区；(<strong>commit树与索引树相同，工作树不同</strong>)</p>

<p><code>git reset --hard 提交</code> 会将HEAD指向给定提交。并且三个树同步。即此种情况，会导致新修改丢失。（<strong>工作区树，索引区，commit树</strong>）</p>

<p>特别说明：<br/>
<code>git reset --mixed</code> ,让你有机会重新编辑文件(系统默认)<br/>
<code>git reset --soft</code>,让你有机会重新修改提交日志<br/>
<code>giet reset --hard</code>,全部删除了.没机会了</p></li>
<li><p>git revert<br/>
指定反转一个提交，并形成新的这个提交记录</p></li>
<li><p>git cherry-pick(重点，难点)<br/>
将其他分支的commit指定合并到当前分支并形成一个新的提交</p></li>
<li><p>git commit --amend<br/>
修改最新提交,主要是对此提交新添加内容，并在修改了最新的提交</p></li>
<li><p>git checkout<br/>
检出分支内容，即沿着当前分支树路径取出内容</p></li>
<li><p>git rebase(这个概念理解的不够透彻)</p></li>
<li><p>git rebase master topic<br/>
将topic可达到master的提交添加到master的最新的后面。（有时也有说成，将你的补丁变基到master分支的头）</p></li>
<li><p>git rebase --onto master maint^ feature<br/>
将从maint<sup>到feature的路径的提交，迁移到master后面(<strong>onto表示把一条分支上的开发线整个移植到完全不同的分支上</strong>)。在此期间需要使用git</sup> rebase --continue 继续下一个提交，也可git rebase --abort进行编辑中止</p></li>
<li><p>git rebase -i （ -- interactive）<br/>
<strong>合并提交，或者改变提交顺序，或者删除，编辑，即将两个提交合并成一个提交（注意不是合并分支）,</strong></p></li>
</ul>

<p><strong>特别注意：这些操作可以专门针对某个文件进行操作。直接在commit后面添加 文件名就可以了</strong></p>

<h2 id="toc_3">四：Git的Diff操作</h2>

<p>diff的操作在实际的工作中是很有用的。</p>

<ul>
<li><p>git diff<br/>
显示工作目录和索引差异</p></li>
<li><p>git diff commit<br/>
显示工作目录与commit差异</p></li>
<li><p>git diff --cached commit<br/>
显示索引中的变更和给定提交中的变更差异</p></li>
<li><p>git diff commit1 commit2<br/>
显示两个commit差异</p></li>
</ul>

<p><strong>差异都是用各个树来进行比较，然后通过比较程序，进行差异</strong></p>

<h2 id="toc_4">五：远程版本库</h2>

<h3 id="toc_5">重点解释了“本地分支”，“本地追踪分支”，“远程追踪分支”区别</h3>

<ol>
<li><p>远程分支几个易混淆的概念<br/>
远程版本库：为版本库提供友好的名字，里面的分支就时远程分支。<br/>
本地版本库：本地库 <br/>
本地分支：本地分支(没有设置track)<br/>
本地追踪分支：设置了track远程分支的分支(一般也就我们本地开发的分支)<br/>
远程追踪分支：当fectch拉取远程分支时，实际下载的文件都在远程追踪个分支里。当执行pull时，这个分支与本地的分支（这个本地分支的upstream要是这个远程追踪分支）执行merge,用来追踪远程版本库中分支的变化。</p>

<p>config文件里如下是记录本地各个分支HEAD的commit号与远程的各个分支Head的commit号。 建立这个refspec预示你要通过从原始版本库中抓取变更来持续更新本地版本库。下面就是这个映射关系</p>

<pre><code>配置信息里的定义:
remote.origin.fetch定义的是远程的别名，
以及与**本地追踪分支的关联**（refs/heads/\*），
**远程追踪分支的关联**关系（refs/remotes/origin/*）;
remote.origin.fetch=+refs/heads/*:refs/remotes/origin/*
</code></pre></li>
<li><p>git remote 命令创建，删除，操作和查看远程版本库。<br/>
引入的所有远程版本库都记录在.git/config文件中。可以通过一个本地库添加多个远程仓库。</p>

<pre><code>git remote add origin https://github.com/xxx(仓库地址)
git remote update origin
git remote show origin
git remote rm origin
git remote prune 删除”远程版本库已经删除的分支“的远程追踪分支
</code></pre></li>
<li><p>建立本地分支与远程追踪分支的关联(即设立本地追踪分支)</p>

<pre><code>[remote &quot;origin&quot;]
url = git@gitee.com:rjb_555/BookerReading.git
fetch = +refs/heads/*:refs/remotes/origin/*
[branch &quot;master&quot;]
remote = origin
merge = refs/heads/master
[branch &quot;develop&quot;]
remote = origin
merge = refs/heads/develop
</code></pre>

<p>[remote &quot;origin&quot;] 定义是远程仓库地址，远程仓库别名，本地追踪分支（refs/heads/<em>），远程追踪分支（refs/remotes/origin/</em>）的关联关系;</p>

<p><code>git branch --track test origin/dev</code><br/>
或者<br/>
<code>git checkout -b mypu --track origin/testbranch</code></p></li>
<li><p>Git fetch,pull,push 的实质</p>

<p>git fetch (拉取远程版本库到远程追踪分支)<br/>
git pull (git fectch，git merge origin/master)<br/>
git push (变更发送到远程版本库，在同步到origin/master)</p>

<p>指定远程版本库的指定分支进行推送<br/>
git push origin master<br/>
这里要理解git push本质&quot;将变更打包“传输”在解包“放到指定的库中。所以git push 只是变更。所以可以将其推到指定的远程仓库。</p>

<p>在非快进的push时，会遭到（non-fast forward）拒绝。 在此时因为远程的已经有人提交了。你的分支在当前远程分支之后，但有共同的提交记录。push -f 强制覆盖(覆盖掉别人的记录)。但此种情况一般都是先Pull,合并别人的提交。<br/>
删除与创建远程分支<br/>
git branch testbranch<br/>
git push origin testbranch(直接在远程创建了一根分支)<br/>
git push origin :foo</p>

<p>原理(git push origin 源：目标)<br/>
git push origin testbranch (简写)(如果远程没偶testbranch ,会将本地的分支推送到远程的版本,即相当于在远程新建分支)<br/>
git push origin testbranch:testbranch<br/>
git push origin raotest:testbranch(将内容推到指定的分支)<br/>
Git push origin :testbranch (将空分支推发哦指定分支，即删除远程分支)</p></li>
</ol>

<h2 id="toc_6">六：多个仓库可以共用一个对象库吗？（很重要，初学时的疑惑点）</h2>

<p>经过实践是可以的。比如，当前库是A，在分支master上，我现在在当前目录添加一个远程的仓库B，幷Pull下来。这时pull下来的对象与库A共用一个对象库。所谓的共用一个对象仓库，就时存储真实数据的地方。当时一般情况我们不这么弄，因为如果都放入一个对象库里，会导致上库变大，上传时变慢。</p>

<p><img src="media/15352517950877/Xnip2018-08-26_14-47-26.png" alt="Xnip2018-08-26_14-47-26"/></p>

<p>当如果是这样一个使用场景（fork公司的参考到你自己的远程库，然后通过发pull request的工作方式）：<br/>
公司的库A，你fork公式的库B,你在你本地添加了这两个的远程库，都pull下来，因为你们使用的是很多相同的文件，所以，不会造成很多重复的存储，因为文件都是按内容hash的。如果当远程同步不能工作时（将A的内容同步到B），可以先pull下A,然后本地合并到B，在通过将B库push 到你自己的远程，然后通过发push request方式请求公司的库的合并。当然你有权限合公司库，可以直接push到公司的库。</p>

<h2 id="toc_7">七：解释fast-forward，non-fast-forward</h2>

<p>我们举例说明：<br/>
开发一直在master分支进行，但忽然有一个新的想法，于是新建了一个develop的分支，并在其上进行一系列提交，完成时，回到 master分支，此时，master分支在创建develop分支之后并未产生任何新的commit。此时的合并就叫fast forward。<br/>
反之，是non-fast-forwad<br/>
哈哈，在知道了，命令行，长长有fast-forward的日志信息！</p>

<h2 id="toc_8">八：解释git rebase ，git cherry-pick</h2>

<h3 id="toc_9">者两命令，不常用，但有时能解决关键问题</h3>

<ul>
<li><p>git cherry-pick<br/>
git cherry-pick 通常用于将一个分支的特定提交引入一个不同的分支中。<br/>
举例说明<br/>
master分支已经有很多提交。master其中一个提交时修复一个bug时，这个bug在另一个分支也存在，需要将这个提交也放到dev分支。在dev会形成一个新的提交。<br/>
<code><br/>
git checkout dev<br/>
git cherry-pick  master~2<br/>
</code></p>

<p>一句话总结，就时将<strong>一个分支的提交拷贝到另一个分支</strong>的最后面，幷形成<strong>一个新的提交</strong>(这句话很重要)</p></li>
<li><p>git rebase</p></li>
</ul>

<p>rebase是个很重要的概念，需要比较综合的能力才能理解的比较好。我将在这篇文章里做详细的解释<a href="https://raojunbo.github.io/2018/08/%E8%AF%A6%E8%A7%A3Git%E9%87%8C%E7%9A%84Rebase%E6%93%8D%E4%BD%9C/">详解Git里的Rebase操作</a></p>

<h2 id="toc_10">九：提交范围(很重要)</h2>

<p>很多命令都可以对提交范围执行某些操作。那么怎么表达这些提交范围呢？<br/>
<strong>&quot;...&quot;表示一个范围，“开始...结束&quot;<br/>
&quot;maser~2&quot;表示master分支往后数第二个提交。（表示的是一个提交点）</strong><br/>
示例<br/>
1. master~5 ... master~2,表示master的倒数第5个提交到倒数第2个提交之间的提交<br/>
2. topic...master，表示在master分支而不在topic分支生的提交</p>

<p>终于写完了这篇总结，以前看书《Git版本控制管理》JonLoeLiger 著 因为没有实践的前提，所以理解的不深。用了将近一年后，重新回过来看时，很做概念就很清晰了。</p>

<h2 id="toc_11">十：多人协作开发时，造成起点分叉的原因(还待研究)</h2>


</div>

<br /><br />
<hr />

<div class="row clearfix">
  <div class="large-6 columns">
	<div class="text-left" style="padding:15px 0px;">
		
	        <a href="15352828379687.html"  title="Previous Post: 详解Git里的Rebase操作">&laquo; 详解Git里的Rebase操作</a>
	    
	</div>
  </div>
  <div class="large-6 columns">
	<div class="text-right" style="padding:15px 0px;">
		
	        <a href="15351910189854.html" 
	        title="Next Post: iOS保持界面流畅的技巧（性能优化）">iOS保持界面流畅的技巧（性能优化） &raquo;</a>
	    
	</div>
  </div>
</div>

<div class="row">
<div style="padding:0px 0.93em;" class="share-comments">

</div>
</div>
<script type="text/javascript">
	$(function(){
		var currentURL = '15352517950877.html';
		$('#side-nav a').each(function(){
			if($(this).attr('href') == currentURL){
				$(this).parent().addClass('active');
			}
		});
	});
</script>  
</div></div>


<div class="page-bottom">
  <div class="row">
  <hr />
  <div class="small-9 columns">
  <p class="copyright">Copyright &copy; 2015
Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a>,&nbsp; 
Theme used <a target="_blank" href="http://github.com">GitHub CSS</a>.</p>
  </div>
  <div class="small-3 columns">
  <p class="copyright text-right"><a href="#header">TOP</a></p>
  </div>
   
  </div>
</div>

        </section>
      </div>
    </div>
    
    
    <script src="asset/js/foundation.min.js"></script>
    <script src="asset/js/foundation/foundation.offcanvas.js"></script>
    <script>
      $(document).foundation();

     
    </script>
    


  </body>
</html>

<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
    
  Git工具 - 北哥传奇
  
  </title>
  
  
  <link href="atom.xml" rel="alternate" title="北哥传奇" type="application/atom+xml">
    <link rel="stylesheet" href="asset/css/foundation.min.css" />
    <link rel="stylesheet" href="asset/css/docs.css" />
    <script src="asset/js/vendor/modernizr.js"></script>
    <script src="asset/js/vendor/jquery.js"></script>
  <script src="asset/highlightjs/highlight.pack.js"></script>
  <link href="asset/highlightjs/styles/github.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script>hljs.initHighlightingOnLoad();</script>
<script type="text/javascript">
  function before_search(){
    var searchVal = 'site:raojunbo.github.io ' + document.getElementById('search_input').value;
    document.getElementById('search_q').value = searchVal;
    return true;
  }
</script>
  </head>
  <body class="antialiased hide-extras">
    
    <div class="marketing off-canvas-wrap" data-offcanvas>
      <div class="inner-wrap">


<nav class="top-bar docs-bar hide-for-small" data-topbar>


  <section class="top-bar-section">
  <div class="row">
      <div style="position: relative;width:100%;"><div style="position: absolute; width:100%;">
        <ul id="main-menu" class="left">
        
        <li id=""><a target="self" href="index.html">Home</a></li>
        
        <li id=""><a target="_self" href="archives.html">Archives</a></li>
        
        </ul>

        <ul class="right" id="search-wrap">
          <li>
<form target="_blank" onsubmit="return before_search();" action="http://google.com/search" method="get">
    <input type="hidden" id="search_q" name="q" value="" />
    <input tabindex="1" type="search" id="search_input"  placeholder="Search"/>
</form>
</li>
          </ul>
      </div></div>
  </div>
  </section>

</nav>

        <nav class="tab-bar show-for-small">
  <a href="javascript:void(0)" class="left-off-canvas-toggle menu-icon">
    <span> &nbsp; 北哥传奇</span>
  </a>
</nav>

<aside class="left-off-canvas-menu">
      <ul class="off-canvas-list">
        
        <li><a target="self" href="index.html">Home</a></li>
        
        <li><a target="_self" href="archives.html">Archives</a></li>
        

    <li><label>Categories</label></li>

        
            <li><a href="%E5%89%8D%E8%A8%80.html">前言</a></li>
        
            <li><a href="%E6%9D%82%E8%AE%B0.html">杂记</a></li>
        
            <li><a href="%E7%AE%97%E6%B3%95.html">算法</a></li>
        
            <li><a href="iOS%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5.html">iOS基础概念</a></li>
        
            <li><a href="iOS%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96.html">iOS性能优化</a></li>
        
            <li><a href="iOS%E5%B7%A5%E5%85%B7%E6%B7%B1%E5%85%A5.html">iOS工具深入</a></li>
        
            <li><a href="shell%E8%84%9A%E6%9C%AC.html">shell脚本</a></li>
        
            <li><a href="C%E8%AF%AD%E8%A8%80%E6%8D%A1%E6%BC%8F.html">C语言捡漏</a></li>
        
            <li><a href="Git%E5%B7%A5%E5%85%B7.html">Git工具</a></li>
        
            <li><a href="iOS%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1.html">iOS架构设计</a></li>
        
            <li><a href="Swift.html">Swift</a></li>
        
            <li><a href="%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html">设计模式</a></li>
        
            <li><a href="%E9%9F%B3%E8%A7%86%E9%A2%91%E6%8A%80%E6%9C%AF.html">音视频技术</a></li>
        
            <li><a href="%E8%AF%81%E5%88%B8%E5%B8%82%E5%9C%BA%E6%8A%95%E8%B5%84%E9%80%BB%E8%BE%91.html">证券市场投资逻辑</a></li>
        
            <li><a href="%E8%8B%B1%E8%AF%AD%E8%83%BD%E5%8A%9B.html">英语能力</a></li>
         

      </ul>
    </aside>

<a class="exit-off-canvas" href="#"></a>


        <section id="main-content" role="main" class="scroll-container">
        
       

 <script type="text/javascript">
	$(function(){
		$('#menu_item_index').addClass('is_active');
	});
</script>
<div class="row">
	<div class="large-8 medium-8 columns">
		<div class="markdown-body home-categories">
		
			<div class="article">
                <a class="clearlink" href="15453592839286.html">
                
                  <h1>Git 拾遗</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<ul>
<li>
<a href="#toc_0"><code>.git</code>文件目录</a>
</li>
<li>
<a href="#toc_1">commit,tree,block关系</a>
</li>
<li>
<a href="#toc_2">分离头指针情况的注意事项（没有与branch进行关联）</a>
</li>
<li>
<a href="#toc_3">修改commit的message</a>
</li>
<li>
<a href="#toc_4">rebase操作</a>
<ul>
<li>
<a href="#toc_5">修改以往的任何一个commit的message(rebase)</a>
</li>
<li>
<a href="#toc_6">合并以往的连续的几个commit（rebase）</a>
</li>
<li>
<a href="#toc_7">合并以往的不连续的commit(rebase)</a>
</li>
</ul>
</li>
<li>
<a href="#toc_8">diff操作</a>
</li>
<li>
<a href="#toc_9">恢复工作区，恢复索引区</a>
</li>
<li>
<a href="#toc_10">删除，重命名文件</a>
</li>
<li>
<a href="#toc_11">ignore文件</a>
</li>
</ul>


<h2 id="toc_0"><code>.git</code>文件目录</h2>

<pre><code>➜  .git git:(V.12.0) ls -l
total 1440
-rw-r--r--    1 raojunbo  staff      26 12 15 15:40 COMMIT_EDITMSG
-rw-r--r--    1 raojunbo  staff    1573 12 18 19:12 FETCH_HEAD
-rw-r--r--    1 raojunbo  staff      23 12 18 19:12 HEAD
-rw-r--r--    1 raojunbo  staff      41 12 18 19:12 ORIG_HEAD
-rw-r--r--    1 raojunbo  staff     551 12 12 12:56 config
-rw-r--r--    1 raojunbo  staff      73 11 30 11:39 description
-rw-r--r--    1 raojunbo  staff  311844 12 20 22:54 gitk.cache
drwxr-xr-x   13 raojunbo  staff     416 11 30 11:39 hooks
-rw-r--r--    1 raojunbo  staff  391258 12 20 22:48 index
drwxr-xr-x    3 raojunbo  staff      96 11 30 11:39 info
drwxr-xr-x    4 raojunbo  staff     128 11 30 11:42 logs
drwxr-xr-x  256 raojunbo  staff    8192 12 14 14:58 objects
-rw-r--r--    1 raojunbo  staff    1536 11 30 11:42 packed-refs
drwxr-xr-x    5 raojunbo  staff     160 11 30 11:42 refs
</code></pre>

<ul>
<li><p>HEAD 文件<br/>
存有当前分支的头指针。在切换分支的时候，会跟随分支的变化而变化。当然也可以不与分支挂钩，直接指向一个处理分支状态（任意指向的）也可以。</p></li>
<li><p>config 文件</p>

<p><code>git config -l</code>命令的内容</p></li>
</ul>

<ul>
<li><p>ORIG_HEAD 文件</p></li>
<li><p>FETCH_HEAD 文件</p></li>
<li><p>object目录<br/>
对象集，block ,commit,tree,tags;</p></li>
<li><p>refs</p></li>
</ul>

<blockquote>
<p>git内部的命令<br/>
查看hash所代表的对象类型 `<code>git cat-file -t 005642f3c41eecb8c56b8b77c4f100f1575ccf54</code></p>

<p>查看hash所代表的对象实际内容<code>git cat-file -p 005642f3c41eecb8c56b8b77c4f100f1575ccf54</code></p>
</blockquote>

<h2 id="toc_1">commit,tree,block关系</h2>

<p><img src="media/15453592839286/gitbloctree.png" alt="gitbloctree"/></p>

<p>blob实际就是真实的文件<br/>
tree实际就是目录<br/>
commit是git里的东西是一个包含“根tree”的东西。commit里有parent(父commit),author(作者),committer(提交者)</p>

<h2 id="toc_2">分离头指针情况的注意事项（没有与branch进行关联）</h2>

<pre><code>➜  GitTestDir git:(master) git checkout 552aa3eba30936d5c4ecf148b38d0cbc89221fbc 
Note: checking out &#39;552aa3eba30936d5c4ecf148b38d0cbc89221fbc&#39;.

You are in &#39;detached HEAD&#39; state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -b with the checkout command again. Example:

  git checkout -b &lt;new-branch-name&gt;

HEAD is now at 552aa3e add sty
➜  GitTestDir git:(552aa3e) 
</code></pre>

<p>直接切换到一个指定的commit号，直接进入工作后，进行提交，如果在checkout 到其它分支，就会出现分离头指针，也就是没有基于某个分支。在后期，分支的指针会自动被清理掉。</p>

<p>git diff HEAD HEAD^     //head与父亲进行对比<br/>
git diff HEAD HEAD<sup>^</sup>   //head 与父亲的父亲进行对比<br/>
git diff HEAD HEAD~1    //head 与父亲进行对比</p>

<h2 id="toc_3">修改commit的message</h2>

<p>对最近一次的message做修改<br/>
<code>git commit --amend</code></p>

<h2 id="toc_4">rebase操作</h2>

<h3 id="toc_5">修改以往的任何一个commit的message(rebase)</h3>

<p>示例<br/>
<code><br/>
commit3<br/>
commit2<br/>
commit1<br/>
</code><br/>
我现在要，修改commit2,那么我就是git rebase -i commit1;以commit1作为基准,去修改其后面的commit信息。<br/>
rebase 命令的交互命令里有拿出commit,重新设置messge等操作。<br/>
修改后commit的commit号会发生变化。</p>

<h3 id="toc_6">合并以往的连续的几个commit（rebase）</h3>

<p>示例<br/>
<code><br/>
commit4<br/>
commit3<br/>
commit2<br/>
commit1<br/>
</code><br/>
合并commit2,与commit3为commit5;这样就会形成一个新的commit;</p>

<h3 id="toc_7">合并以往的不连续的commit(rebase)</h3>

<p>其实与前面一样，只是，列出commit ，然后描述命令</p>

<h2 id="toc_8">diff操作</h2>

<ul>
<li><p>比较工作区，索引区,HEAD的差异<br/>
<code>git diff --cached</code>  比较索引区域HEAD的差别比较<br/>
<code>git diff</code> 工作区与索引区的差别</p></li>
<li><p>比较不同分支的同一个文件的差异</p></li>
</ul>

<p><code>git diff temp master -- filename</code><br/>
temp是一个分支或者commitid，master是一个分支或者commitid；</p>

<h2 id="toc_9">恢复工作区，恢复索引区</h2>

<ul>
<li>清空工作区</li>
</ul>

<p><code>git checkout file</code><br/>
<code>git checkout .</code></p>

<ul>
<li>将加入索引的放入工作区</li>
</ul>

<p><code>git reset HEAD</code></p>

<ul>
<li>清除最近的几个commit</li>
</ul>

<p><code>git reset --hard  commitid</code></p>

<h2 id="toc_10">删除，重命名文件</h2>

<ul>
<li>重命名文件
<code>git mv filename1 filename2</code></li>
</ul>

<ul>
<li>删除文件
<code>git rm filename</code></li>
</ul>

<h2 id="toc_11">ignore文件</h2>

<p><code>.gitignore</code>告诉哪些不需要加入git的管理里</p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2018/12/21</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='Git%E5%B7%A5%E5%85%B7.html'>Git工具</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="15353730636847.html">
                
                  <h1>rebase</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>在命令行里git rebase --help 可以查看英文版本的解释<br/>
下面将对这个英文的文档做输出<br/>
假定下面历史记录<br/>
<img src="media/15352828379687/Xnip2018-08-27_19-14-08.png" alt="Xnip2018-08-27_19-14-08"/></p>

<p>当前在topic分支上<br/>
执行 <br/>
<code>git rebase master</code> 或者 <code>git rebase master topic</code><br/>
将得到如下结果<br/>
<img src="media/15352828379687/Xnip2018-08-27_19-14-18.png" alt="Xnip2018-08-27_19-14-18"/></p>

<p>NOTE:<code>git rebase master topic</code> 形式是<code>git checkout topic ,git rebase master</code>两条命令的相继执行。</p>

<p>如果upstream分支(在这里举例的就是master分支,因为topic从master分支开分支而来)已经包含一个改变的提交，这个提交将会跳过。（A,A`是相同的改变，不同的提交信息）<br/>
<img src="media/15352828379687/Xnip2018-08-27_19-14-28.png" alt="Xnip2018-08-27_19-14-28"/></p>

<p>执行 <code>git rebase master</code><br/>
将会得到<br/>
<img src="media/15352828379687/Xnip2018-08-27_19-14-36.png" alt="Xnip2018-08-27_19-14-36"/></p>

<p>下面将介绍如何使用rebase --onto将一个分支的base迁移到另一个分支。<br/>
假设现在是如下历史记录<br/>
<img src="media/15352828379687/Xnip2018-08-27_19-14-48.png" alt="Xnip2018-08-27_19-14-48"/></p>

<p>我们要得到如下结果<br/>
<img src="media/15352828379687/Xnip2018-08-27_19-14-58.png" alt="Xnip2018-08-27_19-14-58"/></p>

<p>执行 git rebase --onto master next topic </p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2018/8/27</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='Git%E5%B7%A5%E5%85%B7.html'>Git工具</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="15352828379687.html">
                
                  <h1>详解Git里的Rebase操作</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>前言:<br/>
用了一段时间的git，基础命令已经使用的比较熟练，在回顾时，发现平时使用git rebase比价少。找了些文章，都是支离破碎的。最终自己从命令行的文档里找到了平易见人的解释。</p>

<p>下面跟着文章的实践思路一步步走完，会有异想不到的收获</p>

<p>在命令行里git rebase --help 可以查看英文版本的解释<br/>
下面将对这个英文的文档做理解输出</p>

<p>假定下面历史记录<br/>
<img src="media/15352828379687/Xnip2018-08-27_19-14-08.png" alt="Xnip2018-08-27_19-14-08"/></p>

<p>当前在topic分支上<br/>
执行 <br/>
<code>git rebase master</code> <br/>
或者<br/>
 <code>git rebase master topic</code></p>

<p>将得到如下结果<br/>
<img src="media/15352828379687/Xnip2018-08-27_19-14-18.png" alt="Xnip2018-08-27_19-14-18"/></p>

<p>NOTE:<code>git rebase master topic</code> 形式是<code>git checkout topic ,git rebase master</code>两条命令的相继执行。</p>

<p>如果upstream分支(在这里举例的就是master分支,因为topic从master分支开分支而来)已经包含一个改变的提交，这个提交将会跳过。（A,A`是相同的改变，不同的提交信息）<br/>
<img src="media/15352828379687/Xnip2018-08-27_19-14-28.png" alt="Xnip2018-08-27_19-14-28"/></p>

<p>执行 <code>git rebase master</code></p>

<p>将会得到<br/>
<img src="media/15352828379687/Xnip2018-08-27_19-14-36.png" alt="Xnip2018-08-27_19-14-36"/></p>

<p>下面将介绍如何使用rebase --onto将一个分支的base迁移到另一个分支。<br/>
假设现在是如下历史记录<br/>
<img src="media/15352828379687/Xnip2018-08-27_19-14-48.png" alt="Xnip2018-08-27_19-14-48"/></p>

<p>我们要得到如下结果<br/>
<img src="media/15352828379687/Xnip2018-08-27_19-14-58.png" alt="Xnip2018-08-27_19-14-58"/></p>

<p>执行 git rebase --onto master next topic </p>

<p>另一种使用<br/>
<img src="media/15352828379687/Xnip2018-08-28_09-55-15.png" alt="Xnip2018-08-28_09-55-15"/><br/>
执行 git rebase --onto master topicA topicB</p>

<p>（我对这条的理解，checkout到topicB,取topicA到topcB多出来的变更，以master为新的基础）<br/>
<img src="media/15352828379687/Xnip2018-08-27_19-15-17.png" alt="Xnip2018-08-27_19-15-17"/></p>

<p>另一种使用<br/>
假设当前历史记录<br/>
<img src="media/15352828379687/Xnip2018-08-27_19-15-25.png" alt="Xnip2018-08-27_19-15-25"/><br/>
执行 git rebase --onto topicA~5 topicA~3 topicA <br/>
得到如下结果<br/>
<img src="media/15352828379687/Xnip2018-08-27_19-15-33.png" alt="Xnip2018-08-27_19-15-33"/></p>

<p>在rebase操作时，如果有冲突，git rebase将停止让你解决冲突，解决后git add ,在执行git rebase --continue,直到没有冲突为止。想取消rebase可以执行git rebase --abort;</p>

<p>从上面的总结，可以看出，rebase,其内在含义就是变基础（起点）。有两个参数，一个是”找到变基的提交“。另一个是指“定变基的到哪”。</p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2018/8/26</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='Git%E5%B7%A5%E5%85%B7.html'>Git工具</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="15352517950877.html">
                
                  <h1>深入理解Git</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>本篇文章是对使用Git的使用的概述。然后对几个忽略的概念做了一下重新理解。</p>

<ul>
<li>
<a href="#toc_0">一：Git 文件管理</a>
</li>
<li>
<a href="#toc_1">二：Git分支操作</a>
</li>
<li>
<a href="#toc_2">三：Git提交操作</a>
</li>
<li>
<a href="#toc_3">四：Git的Diff操作</a>
</li>
<li>
<a href="#toc_4">五：远程版本库</a>
<ul>
<li>
<a href="#toc_5">重点解释了“本地分支”，“本地追踪分支”，“远程追踪分支”区别</a>
</li>
</ul>
</li>
<li>
<a href="#toc_6">六：多个仓库可以共用一个对象库吗？（很重要，初学时的疑惑点）</a>
</li>
<li>
<a href="#toc_7">七：解释fast-forward，non-fast-forward</a>
</li>
<li>
<a href="#toc_8">八：解释git rebase ，git cherry-pick</a>
<ul>
<li>
<a href="#toc_9">者两命令，不常用，但有时能解决关键问题</a>
</li>
</ul>
</li>
<li>
<a href="#toc_10">九：提交范围(很重要)</a>
</li>
<li>
<a href="#toc_11">十：多人协作开发时，造成起点分叉的原因(还待研究)</a>
</li>
</ul>


<h2 id="toc_0">一：Git 文件管理</h2>

<ul>
<li><p>工作目录<br/>
纯净的工作文件</p></li>
<li><p>索引<br/>
git add命令，将对象添加到对象库中，维持一个新的目录树，这个目录树在工作区没有再次改变时是与工作区相同的目录树。新添加的修改与对象库里的目录树是不同的。而这些新添加的就是待提交到对象库里的修改。</p></li>
<li><p>对象库<br/>
包括，提交对象(commit)，目录树对象（tree），实际的数据(blob)，标签(tag)；<br/>
blob对应正真的数据,文件的每个一版本。<br/>
tree对应目录。树对象下可以有其他数，最终都会有blob的指向<br/>
commit对应提交。对应当前目录树的一个完整快照</p>

<p><strong>从总体上来理解，就是工作目录，索引，对象库，都有一个目录树。从编辑，git add ,git commit，的三个过程，就是目录树的同步工作。当然对象库里的commit是某个目录树的引用即快照。这就快照就是目录树，而这个目录树维持着blob的数据。而commit就记录着作者日志等信息。而commit实际上是链表，将一个个commit串联起来，构成一个分支开发线。</strong></p></li>
</ul>

<h2 id="toc_1">二：Git分支操作</h2>

<p>远程追踪分支(追踪远程分支)，本地追踪分支(追踪&quot;远程追踪分支&quot;)，本地分支（谁也不追踪,自己玩,不具有pull功能）</p>

<ul>
<li><p>分支管理<br/>
git show-branch<br/>
git branch -d &quot;branchname&quot;<br/>
git branch<br/>
git branch -r<br/>
git branch -a<br/>
git branch -d<br/>
git branch -D<br/>
git branch testbranch //从当前commit创建分支<br/>
git branch testbranch2 commitID //从指定的commit创建分支</p></li>
<li><p>分支合并<br/>
<strong>HEAD 当前引用<br/>
FETCH_HEAD 远程跟踪分支的最新<br/>
ORIGIN_HEAD 本分支合并前的commit号或者是reset前的commit号<br/>
MERGE_HEAD 合并时别人的分支的commit号(在有冲突时,哈哈)</strong></p></li>
</ul>

<p>所有对对分支的操作都应该在本地操作。</p>

<h2 id="toc_2">三：Git提交操作</h2>

<ul>
<li><p>git reset  git reset 精髓是--soft ,--mixed,--hard，三者对于head指向，索引树，工作目录的影响。</p>

<p><code>git reset --soft 提交</code> 会将HEAD引用指向给定提交,相当于是将后面对commit的提交的修改重新放入了索引里；(<strong>commit树与索引树不同</strong>)</p>

<p><code>git reset --mixed 提交</code> 会将HEAD指向给定提交，索引内容改变以符合给定提交的树。相当于是将后这个提交的后面的带面放到工作区；(<strong>commit树与索引树相同，工作树不同</strong>)</p>

<p><code>git reset --hard 提交</code> 会将HEAD指向给定提交。并且三个树同步。即此种情况，会导致新修改丢失。（<strong>工作区树，索引区，commit树</strong>）</p>

<p>特别说明：<br/>
<code>git reset --mixed</code> ,让你有机会重新编辑文件(系统默认)<br/>
<code>git reset --soft</code>,让你有机会重新修改提交日志<br/>
<code>giet reset --hard</code>,全部删除了.没机会了</p></li>
<li><p>git revert<br/>
指定反转一个提交，并形成新的这个提交记录</p></li>
<li><p>git cherry-pick(重点，难点)<br/>
将其他分支的commit指定合并到当前分支并形成一个新的提交</p></li>
<li><p>git commit --amend<br/>
修改最新提交,主要是对此提交新添加内容，并在修改了最新的提交</p></li>
<li><p>git checkout<br/>
检出分支内容，即沿着当前分支树路径取出内容</p></li>
<li><p>git rebase(这个概念理解的不够透彻)</p></li>
<li><p>git rebase master topic<br/>
将topic可达到master的提交添加到master的最新的后面。（有时也有说成，将你的补丁变基到master分支的头）</p></li>
<li><p>git rebase --onto master maint^ feature<br/>
将从maint<sup>到feature的路径的提交，迁移到master后面(<strong>onto表示把一条分支上的开发线整个移植到完全不同的分支上</strong>)。在此期间需要使用git</sup> rebase --continue 继续下一个提交，也可git rebase --abort进行编辑中止</p></li>
<li><p>git rebase -i （ -- interactive）<br/>
<strong>合并提交，或者改变提交顺序，或者删除，编辑，即将两个提交合并成一个提交（注意不是合并分支）,</strong></p></li>
</ul>

<p><strong>特别注意：这些操作可以专门针对某个文件进行操作。直接在commit后面添加 文件名就可以了</strong></p>

<h2 id="toc_3">四：Git的Diff操作</h2>

<p>diff的操作在实际的工作中是很有用的。</p>

<ul>
<li><p>git diff<br/>
显示工作目录和索引差异</p></li>
<li><p>git diff commit<br/>
显示工作目录与commit差异</p></li>
<li><p>git diff --cached commit<br/>
显示索引中的变更和给定提交中的变更差异</p></li>
<li><p>git diff commit1 commit2<br/>
显示两个commit差异</p></li>
</ul>

<p><strong>差异都是用各个树来进行比较，然后通过比较程序，进行差异</strong></p>

<h2 id="toc_4">五：远程版本库</h2>

<h3 id="toc_5">重点解释了“本地分支”，“本地追踪分支”，“远程追踪分支”区别</h3>

<ol>
<li><p>远程分支几个易混淆的概念<br/>
远程版本库：为版本库提供友好的名字，里面的分支就时远程分支。<br/>
本地版本库：本地库 <br/>
本地分支：本地分支(没有设置track)<br/>
本地追踪分支：设置了track远程分支的分支(一般也就我们本地开发的分支)<br/>
远程追踪分支：当fectch拉取远程分支时，实际下载的文件都在远程追踪个分支里。当执行pull时，这个分支与本地的分支（这个本地分支的upstream要是这个远程追踪分支）执行merge,用来追踪远程版本库中分支的变化。</p>

<p>config文件里如下是记录本地各个分支HEAD的commit号与远程的各个分支Head的commit号。 建立这个refspec预示你要通过从原始版本库中抓取变更来持续更新本地版本库。下面就是这个映射关系</p>

<pre><code>配置信息里的定义:
remote.origin.fetch定义的是远程的别名，
以及与**本地追踪分支的关联**（refs/heads/\*），
**远程追踪分支的关联**关系（refs/remotes/origin/*）;
remote.origin.fetch=+refs/heads/*:refs/remotes/origin/*
</code></pre></li>
<li><p>git remote 命令创建，删除，操作和查看远程版本库。<br/>
引入的所有远程版本库都记录在.git/config文件中。可以通过一个本地库添加多个远程仓库。</p>

<pre><code>git remote add origin https://github.com/xxx(仓库地址)
git remote update origin
git remote show origin
git remote rm origin
git remote prune 删除”远程版本库已经删除的分支“的远程追踪分支
</code></pre></li>
<li><p>建立本地分支与远程追踪分支的关联(即设立本地追踪分支)</p>

<pre><code>[remote &quot;origin&quot;]
url = git@gitee.com:rjb_555/BookerReading.git
fetch = +refs/heads/*:refs/remotes/origin/*
[branch &quot;master&quot;]
remote = origin
merge = refs/heads/master
[branch &quot;develop&quot;]
remote = origin
merge = refs/heads/develop
</code></pre>

<p>[remote &quot;origin&quot;] 定义是远程仓库地址，远程仓库别名，本地追踪分支（refs/heads/<em>），远程追踪分支（refs/remotes/origin/</em>）的关联关系;</p>

<p><code>git branch --track test origin/dev</code><br/>
或者<br/>
<code>git checkout -b mypu --track origin/testbranch</code></p></li>
<li><p>Git fetch,pull,push 的实质</p>

<p>git fetch (拉取远程版本库到远程追踪分支)<br/>
git pull (git fectch，git merge origin/master)<br/>
git push (变更发送到远程版本库，在同步到origin/master)</p>

<p>指定远程版本库的指定分支进行推送<br/>
git push origin master<br/>
这里要理解git push本质&quot;将变更打包“传输”在解包“放到指定的库中。所以git push 只是变更。所以可以将其推到指定的远程仓库。</p>

<p>在非快进的push时，会遭到（non-fast forward）拒绝。 在此时因为远程的已经有人提交了。你的分支在当前远程分支之后，但有共同的提交记录。push -f 强制覆盖(覆盖掉别人的记录)。但此种情况一般都是先Pull,合并别人的提交。<br/>
删除与创建远程分支<br/>
git branch testbranch<br/>
git push origin testbranch(直接在远程创建了一根分支)<br/>
git push origin :foo</p>

<p>原理(git push origin 源：目标)<br/>
git push origin testbranch (简写)(如果远程没偶testbranch ,会将本地的分支推送到远程的版本,即相当于在远程新建分支)<br/>
git push origin testbranch:testbranch<br/>
git push origin raotest:testbranch(将内容推到指定的分支)<br/>
Git push origin :testbranch (将空分支推发哦指定分支，即删除远程分支)</p></li>
</ol>

<h2 id="toc_6">六：多个仓库可以共用一个对象库吗？（很重要，初学时的疑惑点）</h2>

<p>经过实践是可以的。比如，当前库是A，在分支master上，我现在在当前目录添加一个远程的仓库B，幷Pull下来。这时pull下来的对象与库A共用一个对象库。所谓的共用一个对象仓库，就时存储真实数据的地方。当时一般情况我们不这么弄，因为如果都放入一个对象库里，会导致上库变大，上传时变慢。</p>

<p><img src="media/15352517950877/Xnip2018-08-26_14-47-26.png" alt="Xnip2018-08-26_14-47-26"/></p>

<p>当如果是这样一个使用场景（fork公司的参考到你自己的远程库，然后通过发pull request的工作方式）：<br/>
公司的库A，你fork公式的库B,你在你本地添加了这两个的远程库，都pull下来，因为你们使用的是很多相同的文件，所以，不会造成很多重复的存储，因为文件都是按内容hash的。如果当远程同步不能工作时（将A的内容同步到B），可以先pull下A,然后本地合并到B，在通过将B库push 到你自己的远程，然后通过发push request方式请求公司的库的合并。当然你有权限合公司库，可以直接push到公司的库。</p>

<h2 id="toc_7">七：解释fast-forward，non-fast-forward</h2>

<p>我们举例说明：<br/>
开发一直在master分支进行，但忽然有一个新的想法，于是新建了一个develop的分支，并在其上进行一系列提交，完成时，回到 master分支，此时，master分支在创建develop分支之后并未产生任何新的commit。此时的合并就叫fast forward。<br/>
反之，是non-fast-forwad<br/>
哈哈，在知道了，命令行，长长有fast-forward的日志信息！</p>

<h2 id="toc_8">八：解释git rebase ，git cherry-pick</h2>

<h3 id="toc_9">者两命令，不常用，但有时能解决关键问题</h3>

<ul>
<li><p>git cherry-pick<br/>
git cherry-pick 通常用于将一个分支的特定提交引入一个不同的分支中。<br/>
举例说明<br/>
master分支已经有很多提交。master其中一个提交时修复一个bug时，这个bug在另一个分支也存在，需要将这个提交也放到dev分支。在dev会形成一个新的提交。<br/>
<code><br/>
git checkout dev<br/>
git cherry-pick  master~2<br/>
</code></p>

<p>一句话总结，就时将<strong>一个分支的提交拷贝到另一个分支</strong>的最后面，幷形成<strong>一个新的提交</strong>(这句话很重要)</p></li>
<li><p>git rebase</p></li>
</ul>

<p>rebase是个很重要的概念，需要比较综合的能力才能理解的比较好。我将在这篇文章里做详细的解释<a href="https://raojunbo.github.io/2018/08/%E8%AF%A6%E8%A7%A3Git%E9%87%8C%E7%9A%84Rebase%E6%93%8D%E4%BD%9C/">详解Git里的Rebase操作</a></p>

<h2 id="toc_10">九：提交范围(很重要)</h2>

<p>很多命令都可以对提交范围执行某些操作。那么怎么表达这些提交范围呢？<br/>
<strong>&quot;...&quot;表示一个范围，“开始...结束&quot;<br/>
&quot;maser~2&quot;表示master分支往后数第二个提交。（表示的是一个提交点）</strong><br/>
示例<br/>
1. master~5 ... master~2,表示master的倒数第5个提交到倒数第2个提交之间的提交<br/>
2. topic...master，表示在master分支而不在topic分支生的提交</p>

<p>终于写完了这篇总结，以前看书《Git版本控制管理》JonLoeLiger 著 因为没有实践的前提，所以理解的不深。用了将近一年后，重新回过来看时，很做概念就很清晰了。</p>

<h2 id="toc_11">十：多人协作开发时，造成起点分叉的原因(还待研究)</h2>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2018/8/26</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='Git%E5%B7%A5%E5%85%B7.html'>Git工具</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
              


			<div class="row">
			  <div class="large-6 columns">
			  <p class="text-left" style="padding-top:25px;">
			   
			  </p>
			  </div>
			  <div class="large-6 columns">
			<p class="text-right" style="padding-top:25px;">
			
			</p>
			  </div>
			</div>
		</div>
	</div><!-- large 8 -->

 <div class="large-4 medium-4 columns">
  <div class="hide-for-small">
    <div id="sidebar" class="sidebar">
          <div id="site-info" class="site-info">
            
                <h1>北哥传奇</h1>
                <div class="site-des"></div>
                <div class="social">











  <a target="_blank" class="rss" href="atom.xml" title="RSS">RSS</a>
                
              	 </div>
          	</div>

             

              <div id="site-categories" class="side-item ">
                <div class="side-header">
                  <h2>Categories</h2>
                </div>
                <div class="side-content">

      	<p class="cat-list">
        
            <a href="%E5%89%8D%E8%A8%80.html"><strong>前言</strong></a>
        
            <a href="%E6%9D%82%E8%AE%B0.html"><strong>杂记</strong></a>
        
            <a href="%E7%AE%97%E6%B3%95.html"><strong>算法</strong></a>
        
            <a href="iOS%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5.html"><strong>iOS基础概念</strong></a>
        
            <a href="iOS%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96.html"><strong>iOS性能优化</strong></a>
        
            <a href="iOS%E5%B7%A5%E5%85%B7%E6%B7%B1%E5%85%A5.html"><strong>iOS工具深入</strong></a>
        
            <a href="shell%E8%84%9A%E6%9C%AC.html"><strong>shell脚本</strong></a>
        
            <a href="C%E8%AF%AD%E8%A8%80%E6%8D%A1%E6%BC%8F.html"><strong>C语言捡漏</strong></a>
        
            <a href="Git%E5%B7%A5%E5%85%B7.html"><strong>Git工具</strong></a>
        
            <a href="iOS%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1.html"><strong>iOS架构设计</strong></a>
        
            <a href="Swift.html"><strong>Swift</strong></a>
        
            <a href="%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html"><strong>设计模式</strong></a>
        
            <a href="%E9%9F%B3%E8%A7%86%E9%A2%91%E6%8A%80%E6%9C%AF.html"><strong>音视频技术</strong></a>
        
            <a href="%E8%AF%81%E5%88%B8%E5%B8%82%E5%9C%BA%E6%8A%95%E8%B5%84%E9%80%BB%E8%BE%91.html"><strong>证券市场投资逻辑</strong></a>
        
            <a href="%E8%8B%B1%E8%AF%AD%E8%83%BD%E5%8A%9B.html"><strong>英语能力</strong></a>
         
        </p>


                </div>
              </div>

              <div id="site-categories" class="side-item">
                <div class="side-header">
                  <h2>Recent Posts</h2>
                </div>
                <div class="side-content">
                <ul class="posts-list">
	      
		      
			      <li class="post">
			        <a href="15527009457594.html">我的学习方法论</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="15526311929031.html">iOS 基于CoreText题型渲染引擎主题讨论</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="15515878249617.html">威科夫中阶课程（六,七，八）</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="15515336874984.html">我为什么写作？</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="15514275216080.html">敏捷开发流程实践</a>
			      </li>
		     
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		   
		  		</ul>
                </div>
              </div>
        </div><!-- sidebar -->
      </div><!-- hide for small -->
</div><!-- large 4 -->

</div><!-- row -->

 <div class="page-bottom clearfix">
  <div class="row">
   <p class="copyright">Copyright &copy; 2015
Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a>,&nbsp; 
Theme used <a target="_blank" href="http://github.com">GitHub CSS</a>.</p>
  </div>
</div>

        </section>
      </div>
    </div>

  
    

    <script src="asset/js/foundation.min.js"></script>
    <script>
      $(document).foundation();
      function fixSidebarHeight(){
        var w1 = $('.markdown-body').height();
          var w2 = $('#sidebar').height();
          if (w1 > w2) { $('#sidebar').height(w1); };
      }
      $(function(){
        fixSidebarHeight();
      })
      $(window).load(function(){
          fixSidebarHeight();
      });
     
    </script>

    



  </body>
</html>
